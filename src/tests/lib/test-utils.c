/* test-utils.c generated by valac 0.36.1.697-2b74, the Vala compiler
 * generated from test-utils.vala, do not modify */

/*
 * Copyright (C) 2011 Collabora Ltd.
 * Copyright (C) 2012 Philip Withnall
 *
 * This library is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation, either version 2.1 of the License, or
 * (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with this library.  If not, see <http://www.gnu.org/licenses/>.
 *
 * Authors: Travis Reitter <travis.reitter@collabora.com>
 *          Philip Withnall <philip@tecnocode.co.uk>
 *
 */

#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <gio/gio.h>
#include <folks/folks.h>
#include <gee.h>
#include <config.h>
#include <gobject/gvaluecollector.h>


#define FOLKS_TYPE_TEST_UTILS (folks_test_utils_get_type ())
#define FOLKS_TEST_UTILS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), FOLKS_TYPE_TEST_UTILS, FolksTestUtils))
#define FOLKS_TEST_UTILS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), FOLKS_TYPE_TEST_UTILS, FolksTestUtilsClass))
#define FOLKS_IS_TEST_UTILS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), FOLKS_TYPE_TEST_UTILS))
#define FOLKS_IS_TEST_UTILS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), FOLKS_TYPE_TEST_UTILS))
#define FOLKS_TEST_UTILS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), FOLKS_TYPE_TEST_UTILS, FolksTestUtilsClass))

typedef struct _FolksTestUtils FolksTestUtils;
typedef struct _FolksTestUtilsClass FolksTestUtilsClass;
typedef struct _FolksTestUtilsPrivate FolksTestUtilsPrivate;
enum  {
	FOLKS_TEST_UTILS_DUMMY_PROPERTY,
	FOLKS_TEST_UTILS_LAST_PROPERTY
};
static GParamSpec* folks_test_utils_properties[FOLKS_TEST_UTILS_LAST_PROPERTY];
#define _g_source_unref0(var) ((var == NULL) ? NULL : (var = (g_source_unref (var), NULL)))
#define _g_main_loop_unref0(var) ((var == NULL) ? NULL : (var = (g_main_loop_unref (var), NULL)))
typedef struct _Block1Data Block1Data;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _FolksTestUtilsLoadableIconsContentEqualData FolksTestUtilsLoadableIconsContentEqualData;
typedef struct _Block2Data Block2Data;
typedef struct _FolksTestUtilsBackendPrepareAndWaitForQuiescenceData FolksTestUtilsBackendPrepareAndWaitForQuiescenceData;
typedef struct _Block3Data Block3Data;
typedef struct _FolksTestUtilsAggregatorPrepareAndWaitForQuiescenceData FolksTestUtilsAggregatorPrepareAndWaitForQuiescenceData;
typedef struct _Block4Data Block4Data;
typedef struct _FolksTestUtilsAggregatorPrepareAndWaitForIndividualsData FolksTestUtilsAggregatorPrepareAndWaitForIndividualsData;
typedef struct _Block5Data Block5Data;
typedef struct _FolksTestUtilsAggregatorWaitForIndividualsData FolksTestUtilsAggregatorWaitForIndividualsData;
typedef struct _Block6Data Block6Data;
typedef struct _FolksParamSpecTestUtils FolksParamSpecTestUtils;
#define _vala_assert(expr, msg) if G_LIKELY (expr) ; else g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);
#define _vala_return_if_fail(expr, msg) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return; }
#define _vala_return_val_if_fail(expr, msg, val) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return val; }
#define _vala_warn_if_fail(expr, msg) if G_LIKELY (expr) ; else g_warn_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);

struct _FolksTestUtils {
	GTypeInstance parent_instance;
	volatile int ref_count;
	FolksTestUtilsPrivate * priv;
};

struct _FolksTestUtilsClass {
	GTypeClass parent_class;
	void (*finalize) (FolksTestUtils *self);
};

struct _Block1Data {
	int _ref_count_;
	GMainLoop* loop;
};

struct _FolksTestUtilsLoadableIconsContentEqualData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GAsyncReadyCallback _callback_;
	gboolean _task_complete_;
	GLoadableIcon* a;
	GLoadableIcon* b;
	gint icon_size;
	gboolean result;
	gboolean retval;
	GLoadableIcon* _tmp0_;
	GLoadableIcon* _tmp1_;
	gboolean _tmp2_;
	GLoadableIcon* _tmp3_;
	GLoadableIcon* _tmp4_;
	gchar* a_type;
	GInputStream* a_input;
	GLoadableIcon* _tmp5_;
	gint _tmp6_;
	gchar* _tmp7_;
	GInputStream* _tmp8_;
	gchar* b_type;
	GInputStream* b_input;
	GLoadableIcon* _tmp9_;
	gint _tmp10_;
	gchar* _tmp11_;
	GInputStream* _tmp12_;
	gsize bufsize;
	guint8* a_data;
	gsize _tmp13_;
	guint8* _tmp14_;
	gint a_data_length1;
	gint _a_data_size_;
	guint8* b_data;
	gsize _tmp15_;
	guint8* _tmp16_;
	gint b_data_length1;
	gint _b_data_size_;
	gsize a_read_size;
	gboolean _tmp17_;
	gsize _tmp18_;
	gssize _tmp19_;
	GInputStream* _tmp20_;
	guint8* _tmp21_;
	gint _tmp21__length1;
	gssize _tmp22_;
	gssize b_read_size;
	GInputStream* _tmp23_;
	guint8* _tmp24_;
	gint _tmp24__length1;
	gssize _tmp25_;
	gboolean _tmp26_;
	gsize _tmp27_;
	gssize _tmp28_;
	guint8* _tmp29_;
	gint _tmp29__length1;
	guint8* _tmp30_;
	gint _tmp30__length1;
	gsize _tmp31_;
	gint _tmp32_;
	GInputStream* _tmp33_;
	GInputStream* _tmp34_;
	GError* e1;
	const gchar* _tmp35_;
	GError * _inner_error_;
};

struct _Block2Data {
	int _ref_count_;
	gboolean has_yielded;
	gpointer _async_data_;
};

struct _FolksTestUtilsBackendPrepareAndWaitForQuiescenceData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GAsyncReadyCallback _callback_;
	gboolean _task_complete_;
	FolksBackend* backend;
	Block2Data* _data2_;
	gulong signal_id;
	FolksBackend* _tmp0_;
	gulong _tmp1_;
	FolksBackend* _tmp2_;
	FolksBackend* _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	FolksBackend* _tmp6_;
	gulong _tmp7_;
	FolksBackend* _tmp8_;
	gboolean _tmp9_;
	gboolean _tmp10_;
	GError * _inner_error_;
};

struct _Block3Data {
	int _ref_count_;
	gboolean has_yielded;
	gpointer _async_data_;
};

struct _FolksTestUtilsAggregatorPrepareAndWaitForQuiescenceData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GAsyncReadyCallback _callback_;
	gboolean _task_complete_;
	FolksIndividualAggregator* aggregator;
	Block3Data* _data3_;
	gulong signal_id;
	FolksIndividualAggregator* _tmp0_;
	gulong _tmp1_;
	FolksIndividualAggregator* _tmp2_;
	FolksIndividualAggregator* _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	FolksIndividualAggregator* _tmp6_;
	gulong _tmp7_;
	FolksIndividualAggregator* _tmp8_;
	gboolean _tmp9_;
	gboolean _tmp10_;
	GError * _inner_error_;
};

struct _Block4Data {
	int _ref_count_;
	GeeHashSet* expected;
	gboolean has_yielded;
	gpointer _async_data_;
};

struct _FolksTestUtilsAggregatorPrepareAndWaitForIndividualsData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GAsyncReadyCallback _callback_;
	gboolean _task_complete_;
	FolksIndividualAggregator* aggregator;
	gchar** expected_persona_names;
	gint expected_persona_names_length1;
	Block4Data* _data4_;
	GeeHashSet* _tmp0_;
	gchar** _tmp1_;
	gint _tmp1__length1;
	gchar** name_collection;
	gint name_collection_length1;
	gint _name_collection_size_;
	gint name_it;
	gchar* _tmp2_;
	gchar* name;
	const gchar* _tmp3_;
	GeeHashSet* _tmp4_;
	const gchar* _tmp5_;
	gulong signal_id;
	FolksIndividualAggregator* _tmp6_;
	gulong _tmp7_;
	FolksIndividualAggregator* _tmp8_;
	GeeHashSet* _tmp9_;
	gint _tmp10_;
	gint _tmp11_;
	FolksIndividualAggregator* _tmp12_;
	gulong _tmp13_;
	GeeHashSet* _tmp14_;
	gint _tmp15_;
	gint _tmp16_;
	GError * _inner_error_;
};

struct _Block5Data {
	int _ref_count_;
	GeeHashSet* expected_added;
	GeeHashSet* expected_removed;
	gpointer _async_data_;
};

struct _FolksTestUtilsAggregatorWaitForIndividualsData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GAsyncReadyCallback _callback_;
	gboolean _task_complete_;
	FolksIndividualAggregator* aggregator;
	gchar** expected_added_persona_names;
	gint expected_added_persona_names_length1;
	gchar** expected_removed_persona_names;
	gint expected_removed_persona_names_length1;
	Block5Data* _data5_;
	gboolean _tmp0_;
	gchar** _tmp1_;
	gint _tmp1__length1;
	gchar** _tmp2_;
	gint _tmp2__length1;
	GeeHashSet* _tmp3_;
	GeeHashSet* _tmp4_;
	gchar** _tmp5_;
	gint _tmp5__length1;
	gchar** name_collection;
	gint name_collection_length1;
	gint _name_collection_size_;
	gint name_it;
	gchar* _tmp6_;
	gchar* name;
	GeeHashSet* _tmp7_;
	const gchar* _tmp8_;
	gchar** _tmp9_;
	gint _tmp9__length1;
	gchar** _vala1_name_collection;
	gint _vala1_name_collection_length1;
	gint __vala1_name_collection_size_;
	gint _vala1_name_it;
	gchar* _tmp10_;
	gchar* _vala1_name;
	GeeHashSet* _tmp11_;
	const gchar* _tmp12_;
	gulong signal_id;
	FolksIndividualAggregator* _tmp13_;
	gulong _tmp14_;
	FolksIndividualAggregator* _tmp15_;
	gulong _tmp16_;
	gboolean _tmp17_;
	GeeHashSet* _tmp18_;
	gint _tmp19_;
	gint _tmp20_;
	GeeHashSet* _tmp21_;
	gint _tmp22_;
	gint _tmp23_;
};

struct _Block6Data {
	int _ref_count_;
	GMainLoop* main_loop;
};

struct _FolksParamSpecTestUtils {
	GParamSpec parent_instance;
};


static gpointer folks_test_utils_parent_class = NULL;

gpointer folks_test_utils_ref (gpointer instance);
void folks_test_utils_unref (gpointer instance);
GParamSpec* folks_param_spec_test_utils (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void folks_value_set_test_utils (GValue* value, gpointer v_object);
void folks_value_take_test_utils (GValue* value, gpointer v_object);
gpointer folks_value_get_test_utils (const GValue* value);
GType folks_test_utils_get_type (void) G_GNUC_CONST;
gboolean haze_remove_directory (const gchar* path);
gint folks_test_utils_multiply_timeout (gint timeout);
void folks_test_utils_loop_run_with_timeout (GMainLoop* loop, gint timeout);
static gboolean __lambda4_ (void);
static gboolean ___lambda4__gsource_func (gpointer self);
void folks_test_utils_loop_run_with_non_fatal_timeout (GMainLoop* loop, gint timeout) G_GNUC_DEPRECATED;
static Block1Data* block1_data_ref (Block1Data* _data1_);
static void block1_data_unref (void * _userdata_);
static gboolean __lambda5_ (Block1Data* _data1_);
static gboolean ___lambda5__gsource_func (gpointer self);
static void folks_test_utils_loadable_icons_content_equal_data_free (gpointer _data);
static void folks_test_utils_loadable_icons_content_equal_async_ready_wrapper (GObject *source_object, GAsyncResult *res, void *user_data);
void folks_test_utils_loadable_icons_content_equal (GLoadableIcon* a, GLoadableIcon* b, gint icon_size, GAsyncReadyCallback _callback_, gpointer _user_data_);
gboolean folks_test_utils_loadable_icons_content_equal_finish (GAsyncResult* _res_);
static gboolean folks_test_utils_loadable_icons_content_equal_co (FolksTestUtilsLoadableIconsContentEqualData* _data_);
static void folks_test_utils_loadable_icons_content_equal_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_);
static void folks_test_utils_backend_prepare_and_wait_for_quiescence_data_free (gpointer _data);
static void folks_test_utils_backend_prepare_and_wait_for_quiescence_async_ready_wrapper (GObject *source_object, GAsyncResult *res, void *user_data);
void folks_test_utils_backend_prepare_and_wait_for_quiescence (FolksBackend* backend, GAsyncReadyCallback _callback_, gpointer _user_data_);
void folks_test_utils_backend_prepare_and_wait_for_quiescence_finish (GAsyncResult* _res_, GError** error);
static gboolean folks_test_utils_backend_prepare_and_wait_for_quiescence_co (FolksTestUtilsBackendPrepareAndWaitForQuiescenceData* _data_);
static Block2Data* block2_data_ref (Block2Data* _data2_);
static void block2_data_unref (void * _userdata_);
static void __lambda6_ (Block2Data* _data2_, GObject* obj, GParamSpec* pspec);
static void ___lambda6__g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self);
static void folks_test_utils_backend_prepare_and_wait_for_quiescence_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_);
static void folks_test_utils_aggregator_prepare_and_wait_for_quiescence_data_free (gpointer _data);
static void folks_test_utils_aggregator_prepare_and_wait_for_quiescence_async_ready_wrapper (GObject *source_object, GAsyncResult *res, void *user_data);
void folks_test_utils_aggregator_prepare_and_wait_for_quiescence (FolksIndividualAggregator* aggregator, GAsyncReadyCallback _callback_, gpointer _user_data_);
void folks_test_utils_aggregator_prepare_and_wait_for_quiescence_finish (GAsyncResult* _res_, GError** error);
static gboolean folks_test_utils_aggregator_prepare_and_wait_for_quiescence_co (FolksTestUtilsAggregatorPrepareAndWaitForQuiescenceData* _data_);
static Block3Data* block3_data_ref (Block3Data* _data3_);
static void block3_data_unref (void * _userdata_);
static void __lambda7_ (Block3Data* _data3_, GObject* obj, GParamSpec* pspec);
static void ___lambda7__g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self);
static void folks_test_utils_aggregator_prepare_and_wait_for_quiescence_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_);
static void folks_test_utils_aggregator_prepare_and_wait_for_individuals_data_free (gpointer _data);
static void folks_test_utils_aggregator_prepare_and_wait_for_individuals_async_ready_wrapper (GObject *source_object, GAsyncResult *res, void *user_data);
void folks_test_utils_aggregator_prepare_and_wait_for_individuals (FolksIndividualAggregator* aggregator, gchar** expected_persona_names, int expected_persona_names_length1, GAsyncReadyCallback _callback_, gpointer _user_data_);
void folks_test_utils_aggregator_prepare_and_wait_for_individuals_finish (GAsyncResult* _res_, GError** error);
static gboolean folks_test_utils_aggregator_prepare_and_wait_for_individuals_co (FolksTestUtilsAggregatorPrepareAndWaitForIndividualsData* _data_);
static Block4Data* block4_data_ref (Block4Data* _data4_);
static void block4_data_unref (void * _userdata_);
static void __lambda8_ (Block4Data* _data4_, GeeMultiMap* changes);
static void ___lambda8__folks_individual_aggregator_individuals_changed_detailed (FolksIndividualAggregator* _sender, GeeMultiMap* changes, gpointer self);
static void folks_test_utils_aggregator_prepare_and_wait_for_individuals_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_);
static void folks_test_utils_aggregator_wait_for_individuals_data_free (gpointer _data);
static void folks_test_utils_aggregator_wait_for_individuals_async_ready_wrapper (GObject *source_object, GAsyncResult *res, void *user_data);
void folks_test_utils_aggregator_wait_for_individuals (FolksIndividualAggregator* aggregator, gchar** expected_added_persona_names, int expected_added_persona_names_length1, gchar** expected_removed_persona_names, int expected_removed_persona_names_length1, GAsyncReadyCallback _callback_, gpointer _user_data_);
void folks_test_utils_aggregator_wait_for_individuals_finish (GAsyncResult* _res_);
static gboolean folks_test_utils_aggregator_wait_for_individuals_co (FolksTestUtilsAggregatorWaitForIndividualsData* _data_);
static Block5Data* block5_data_ref (Block5Data* _data5_);
static void block5_data_unref (void * _userdata_);
static void __lambda9_ (Block5Data* _data5_, GeeMultiMap* changes);
static void ___lambda9__folks_individual_aggregator_individuals_changed_detailed (FolksIndividualAggregator* _sender, GeeMultiMap* changes, gpointer self);
void folks_test_utils_aggregator_prepare_and_wait_for_individuals_sync_with_timeout (FolksIndividualAggregator* aggregator, gchar** expected_persona_names, int expected_persona_names_length1, gint timeout);
static Block6Data* block6_data_ref (Block6Data* _data6_);
static void block6_data_unref (void * _userdata_);
static void __lambda10_ (Block6Data* _data6_, GObject* o, GAsyncResult* r);
static void ___lambda10__gasync_ready_callback (GObject* source_object, GAsyncResult* res, gpointer self);
FolksIndividual* folks_test_utils_get_individual_by_name (FolksIndividualAggregator* aggregator, const gchar* full_name);
void folks_test_utils_run_test_helper_sync (gchar** argv, int argv_length1, gchar* * capture_stdout, GError** error);
static gchar** _vala_array_dup1 (gchar** self, int length);
gchar* folks_test_utils_get_source_test_data (const gchar* filename);
gchar* folks_test_utils_get_built_test_data (const gchar* filename);
gboolean folks_test_utils_main_context_is_empty (GMainContext* context);
FolksTestUtils* folks_test_utils_new (void);
FolksTestUtils* folks_test_utils_construct (GType object_type);
static void folks_test_utils_finalize (FolksTestUtils * obj);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);


/**
   * Apply an arbitrary fudge factor to the timeout, which might be
   * appropriate for any debuggers or other slow wrappers we're using.
   *
   * @param timeout A timeout in any units
   * @return A revised timeout in the same units
   */
gint folks_test_utils_multiply_timeout (gint timeout) {
	gint result = 0;
	gint _result_ = 0;
	gint _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp3_;
#line 43 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = timeout;
#line 43 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_result_ = _tmp0_;
#line 45 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp1_ = g_getenv ("FOLKS_TEST_VALGRIND");
#line 45 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_tmp1_ != NULL) {
#line 439 "test-utils.c"
		gint _tmp2_;
#line 47 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp2_ = _result_;
#line 47 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_result_ = _tmp2_ * 10;
#line 445 "test-utils.c"
	}
#line 50 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp3_ = g_getenv ("FOLKS_TEST_CALLGRIND");
#line 50 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_tmp3_ != NULL) {
#line 451 "test-utils.c"
		gint _tmp4_;
#line 52 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp4_ = _result_;
#line 52 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_result_ = _tmp4_ * 10;
#line 457 "test-utils.c"
	}
#line 55 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	result = _result_;
#line 55 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return result;
#line 463 "test-utils.c"
}


/**
   * Run //loop// with a timeout. Something should call ``loop.quit()``
   * before the timeout is reached. If not, a fatal error occurs.
   *
   * @param loop A main loop.
   * @param timeout A timeout, initially in seconds, defaulting to long
   *    enough to do something "reasonably fast". It will be adjusted with
   *    multiply_timeout() before use.
   */
static gboolean __lambda4_ (void) {
	gboolean result = FALSE;
#line 71 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_error ("test-utils.vala:71: Timed out");
#line 71 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return result;
#line 482 "test-utils.c"
}


static gboolean ___lambda4__gsource_func (gpointer self) {
	gboolean result;
	result = __lambda4_ ();
#line 71 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return result;
#line 491 "test-utils.c"
}


void folks_test_utils_loop_run_with_timeout (GMainLoop* loop, gint timeout) {
	GSource* source = NULL;
	gint _tmp0_;
	gint _tmp1_;
	GSource* _tmp2_;
	GMainLoop* _tmp3_;
	GMainContext* _tmp4_;
	GMainLoop* _tmp5_;
#line 67 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_if_fail (loop != NULL);
#line 69 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = timeout;
#line 69 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp1_ = folks_test_utils_multiply_timeout (_tmp0_);
#line 69 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp2_ = g_timeout_source_new_seconds ((guint) _tmp1_);
#line 69 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	source = _tmp2_;
#line 71 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_source_set_callback (source, ___lambda4__gsource_func, NULL, NULL);
#line 72 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp3_ = loop;
#line 72 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp4_ = g_main_loop_get_context (_tmp3_);
#line 72 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_source_attach (source, _tmp4_);
#line 74 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp5_ = loop;
#line 74 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_main_loop_run (_tmp5_);
#line 76 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_source_destroy (source);
#line 67 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_source_unref0 (source);
#line 529 "test-utils.c"
}


/**
   * Run //loop// with a timeout. Something should call ``loop.quit()``
   * before the timeout is reached. If not, the timeout callback will do so.
   *
   * This function is a bad idea: we don't want things to run for an arbitrary
   * time. Use loop_run_with_timeout() instead.
   *
   * FIXME: Remove this when it has no more callers.
   *
   * @param loop A main loop.
   * @param timeout A timeout, initially in seconds, defaulting to long
   *    enough to do something "reasonably fast". It will be adjusted with
   *    multiply_timeout() before use.
   */
static gpointer _g_main_loop_ref0 (gpointer self) {
#line 94 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return self ? g_main_loop_ref (self) : NULL;
#line 550 "test-utils.c"
}


static Block1Data* block1_data_ref (Block1Data* _data1_) {
#line 94 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_atomic_int_inc (&_data1_->_ref_count_);
#line 94 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return _data1_;
#line 559 "test-utils.c"
}


static void block1_data_unref (void * _userdata_) {
	Block1Data* _data1_;
	_data1_ = (Block1Data*) _userdata_;
#line 94 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (g_atomic_int_dec_and_test (&_data1_->_ref_count_)) {
#line 94 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_g_main_loop_unref0 (_data1_->loop);
#line 94 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_slice_free (Block1Data, _data1_);
#line 572 "test-utils.c"
	}
}


static gboolean __lambda5_ (Block1Data* _data1_) {
	gboolean result = FALSE;
	GMainLoop* _tmp0_;
#line 101 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = _data1_->loop;
#line 101 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_main_loop_quit (_tmp0_);
#line 102 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	result = FALSE;
#line 102 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return result;
#line 588 "test-utils.c"
}


static gboolean ___lambda5__gsource_func (gpointer self) {
	gboolean result;
	result = __lambda5_ (self);
#line 99 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return result;
#line 597 "test-utils.c"
}


void folks_test_utils_loop_run_with_non_fatal_timeout (GMainLoop* loop, gint timeout) {
	Block1Data* _data1_;
	GMainLoop* _tmp0_;
	GMainLoop* _tmp1_;
	GSource* source = NULL;
	gint _tmp2_;
	gint _tmp3_;
	GSource* _tmp4_;
	GMainLoop* _tmp5_;
	GMainContext* _tmp6_;
	GMainLoop* _tmp7_;
#line 94 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_if_fail (loop != NULL);
#line 94 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data1_ = g_slice_new0 (Block1Data);
#line 94 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data1_->_ref_count_ = 1;
#line 94 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = loop;
#line 94 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp1_ = _g_main_loop_ref0 (_tmp0_);
#line 94 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_main_loop_unref0 (_data1_->loop);
#line 94 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data1_->loop = _tmp1_;
#line 97 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp2_ = timeout;
#line 97 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp3_ = folks_test_utils_multiply_timeout (_tmp2_);
#line 97 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp4_ = g_timeout_source_new_seconds ((guint) _tmp3_);
#line 97 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	source = _tmp4_;
#line 99 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_source_set_callback (source, ___lambda5__gsource_func, block1_data_ref (_data1_), block1_data_unref);
#line 104 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp5_ = _data1_->loop;
#line 104 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp6_ = g_main_loop_get_context (_tmp5_);
#line 104 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_source_attach (source, _tmp6_);
#line 106 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp7_ = _data1_->loop;
#line 106 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_main_loop_run (_tmp7_);
#line 108 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_source_destroy (source);
#line 94 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_source_unref0 (source);
#line 94 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	block1_data_unref (_data1_);
#line 94 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data1_ = NULL;
#line 654 "test-utils.c"
}


static void folks_test_utils_loadable_icons_content_equal_data_free (gpointer _data) {
	FolksTestUtilsLoadableIconsContentEqualData* _data_;
	_data_ = _data;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_object_unref0 (_data_->a);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_object_unref0 (_data_->b);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_slice_free (FolksTestUtilsLoadableIconsContentEqualData, _data_);
#line 667 "test-utils.c"
}


static void folks_test_utils_loadable_icons_content_equal_async_ready_wrapper (GObject *source_object, GAsyncResult *res, void *user_data) {
	FolksTestUtilsLoadableIconsContentEqualData* _task_data_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_task_data_ = g_task_get_task_data (G_TASK (res));
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_task_data_->_callback_ != NULL) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_task_data_->_callback_ (source_object, res, user_data);
#line 679 "test-utils.c"
	}
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_task_data_->_task_complete_ = TRUE;
#line 683 "test-utils.c"
}


static gpointer _g_object_ref0 (gpointer self) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return self ? g_object_ref (self) : NULL;
#line 690 "test-utils.c"
}


void folks_test_utils_loadable_icons_content_equal (GLoadableIcon* a, GLoadableIcon* b, gint icon_size, GAsyncReadyCallback _callback_, gpointer _user_data_) {
	FolksTestUtilsLoadableIconsContentEqualData* _data_;
	GLoadableIcon* _tmp0_;
	GLoadableIcon* _tmp1_;
	GLoadableIcon* _tmp2_;
	GLoadableIcon* _tmp3_;
	gint _tmp4_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_ = g_slice_new0 (FolksTestUtilsLoadableIconsContentEqualData);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_callback_ = _callback_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_async_result = g_task_new (NULL, NULL, folks_test_utils_loadable_icons_content_equal_async_ready_wrapper, _user_data_);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_callback_ == NULL) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_task_complete_ = TRUE;
#line 711 "test-utils.c"
	}
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_task_set_task_data (_data_->_async_result, _data_, folks_test_utils_loadable_icons_content_equal_data_free);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = a;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_object_unref0 (_data_->a);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->a = _tmp1_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp2_ = b;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp3_ = _g_object_ref0 (_tmp2_);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_object_unref0 (_data_->b);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->b = _tmp3_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp4_ = icon_size;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->icon_size = _tmp4_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	folks_test_utils_loadable_icons_content_equal_co (_data_);
#line 737 "test-utils.c"
}


gboolean folks_test_utils_loadable_icons_content_equal_finish (GAsyncResult* _res_) {
	gboolean result;
	FolksTestUtilsLoadableIconsContentEqualData* _data_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	result = _data_->result;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return result;
#line 750 "test-utils.c"
}


/**
   * Compare the content of two {@link LoadableIcon}s for equality.
   *
   * This is in contrast to {@link Icon.equal}, which returns ``false`` for
   * identical icons stored in different subclasses or in different storage
   * locations.
   *
   * This function is particularly useful for tests which compare an avatar set
   * on an {@link AvatarDetails}'s with that object's final avatar, since it may
   * be stored in a location in the avatar cache.
   *
   * @param a the first icon
   * @param b the second icon
   * @param size the size at which to compare the icons
   * @return ``true`` if the instances are equal, ``false`` otherwise
   */
static void folks_test_utils_loadable_icons_content_equal_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_) {
	FolksTestUtilsLoadableIconsContentEqualData* _data_;
#line 141 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_ = _user_data_;
#line 141 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_source_object_ = source_object;
#line 141 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_res_ = _res_;
#line 141 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_task_complete_ = TRUE;
#line 141 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	folks_test_utils_loadable_icons_content_equal_co (_data_);
#line 782 "test-utils.c"
}


static gboolean folks_test_utils_loadable_icons_content_equal_co (FolksTestUtilsLoadableIconsContentEqualData* _data_) {
#line 127 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	switch (_data_->_state_) {
#line 127 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 0:
#line 791 "test-utils.c"
		goto _state_0;
#line 127 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 1:
#line 795 "test-utils.c"
		goto _state_1;
#line 127 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 2:
#line 799 "test-utils.c"
		goto _state_2;
#line 127 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 3:
#line 803 "test-utils.c"
		goto _state_3;
#line 127 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 4:
#line 807 "test-utils.c"
		goto _state_4;
#line 127 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 5:
#line 811 "test-utils.c"
		goto _state_5;
#line 127 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 6:
#line 815 "test-utils.c"
		goto _state_6;
		default:
#line 127 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_assert_not_reached ();
#line 820 "test-utils.c"
	}
	_state_0:
#line 131 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->retval = FALSE;
#line 133 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp0_ = _data_->a;
#line 133 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp1_ = _data_->b;
#line 133 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_data_->_tmp0_ == _data_->_tmp1_) {
#line 134 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->result = TRUE;
#line 134 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 134 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		if (_data_->_state_ != 0) {
#line 134 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			while (_data_->_task_complete_ != TRUE) {
#line 134 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 841 "test-utils.c"
			}
		}
#line 134 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_object_unref (_data_->_async_result);
#line 134 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return FALSE;
#line 848 "test-utils.c"
	}
#line 136 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp3_ = _data_->a;
#line 136 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_data_->_tmp3_ != NULL) {
#line 136 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp4_ = _data_->b;
#line 136 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp2_ = _data_->_tmp4_ != NULL;
#line 858 "test-utils.c"
	} else {
#line 136 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp2_ = FALSE;
#line 862 "test-utils.c"
	}
#line 136 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_data_->_tmp2_) {
#line 866 "test-utils.c"
		{
#line 141 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp5_ = _data_->a;
#line 141 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp6_ = _data_->icon_size;
#line 141 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp7_ = NULL;
#line 141 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_state_ = 1;
#line 141 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			g_loadable_icon_load_async (_data_->_tmp5_, _data_->_tmp6_, NULL, folks_test_utils_loadable_icons_content_equal_ready, _data_);
#line 141 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			return FALSE;
#line 880 "test-utils.c"
			_state_1:
#line 141 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp8_ = g_loadable_icon_load_finish (_data_->_tmp5_, _data_->_res_, &_data_->_tmp7_, &_data_->_inner_error_);
#line 141 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_g_free0 (_data_->a_type);
#line 141 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->a_type = _data_->_tmp7_;
#line 141 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->a_input = _data_->_tmp8_;
#line 141 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 141 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_free0 (_data_->a_type);
#line 894 "test-utils.c"
				goto __catch1_g_error;
			}
#line 143 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp9_ = _data_->b;
#line 143 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp10_ = _data_->icon_size;
#line 143 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp11_ = NULL;
#line 143 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_state_ = 2;
#line 143 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			g_loadable_icon_load_async (_data_->_tmp9_, _data_->_tmp10_, NULL, folks_test_utils_loadable_icons_content_equal_ready, _data_);
#line 143 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			return FALSE;
#line 909 "test-utils.c"
			_state_2:
#line 143 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp12_ = g_loadable_icon_load_finish (_data_->_tmp9_, _data_->_res_, &_data_->_tmp11_, &_data_->_inner_error_);
#line 143 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_g_free0 (_data_->b_type);
#line 143 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->b_type = _data_->_tmp11_;
#line 143 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->b_input = _data_->_tmp12_;
#line 143 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 143 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_free0 (_data_->b_type);
#line 143 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_object_unref0 (_data_->a_input);
#line 143 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_free0 (_data_->a_type);
#line 927 "test-utils.c"
				goto __catch1_g_error;
			}
#line 146 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->bufsize = (gsize) 2048;
#line 147 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp13_ = _data_->bufsize;
#line 147 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp14_ = g_new0 (guint8, _data_->_tmp13_);
#line 147 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->a_data = _data_->_tmp14_;
#line 147 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->a_data_length1 = _data_->_tmp13_;
#line 147 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_a_data_size_ = _data_->a_data_length1;
#line 148 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp15_ = _data_->bufsize;
#line 148 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp16_ = g_new0 (guint8, _data_->_tmp15_);
#line 148 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->b_data = _data_->_tmp16_;
#line 148 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->b_data_length1 = _data_->_tmp15_;
#line 148 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_b_data_size_ = _data_->b_data_length1;
#line 151 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->retval = TRUE;
#line 152 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->a_read_size = (gsize) -1;
#line 956 "test-utils.c"
			{
#line 153 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_data_->_tmp17_ = TRUE;
#line 153 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				while (TRUE) {
#line 153 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					if (!_data_->_tmp17_) {
#line 165 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_data_->_tmp18_ = _data_->a_read_size;
#line 165 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						if (!(_data_->_tmp18_ > ((gsize) 0))) {
#line 165 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
							break;
#line 970 "test-utils.c"
						}
					}
#line 153 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					_data_->_tmp17_ = FALSE;
#line 155 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					_data_->_tmp20_ = _data_->a_input;
#line 155 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					_data_->_tmp21_ = _data_->a_data;
#line 155 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					_data_->_tmp21__length1 = _data_->a_data_length1;
#line 155 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					_data_->_state_ = 3;
#line 155 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					g_input_stream_read_async (_data_->_tmp20_, _data_->_tmp21_, (gsize) _data_->_tmp21__length1, G_PRIORITY_DEFAULT, NULL, folks_test_utils_loadable_icons_content_equal_ready, _data_);
#line 155 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					return FALSE;
#line 987 "test-utils.c"
					_state_3:
#line 155 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					_data_->_tmp22_ = g_input_stream_read_finish (_data_->_tmp20_, _data_->_res_, &_data_->_inner_error_);
#line 155 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					_data_->_tmp19_ = _data_->_tmp22_;
#line 155 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 155 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_data_->b_data = (g_free (_data_->b_data), NULL);
#line 155 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_data_->a_data = (g_free (_data_->a_data), NULL);
#line 155 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_g_object_unref0 (_data_->b_input);
#line 155 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_g_free0 (_data_->b_type);
#line 155 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_g_object_unref0 (_data_->a_input);
#line 155 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_g_free0 (_data_->a_type);
#line 1007 "test-utils.c"
						goto __catch1_g_error;
					}
#line 155 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					_data_->a_read_size = (gsize) _data_->_tmp19_;
#line 156 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					_data_->_tmp23_ = _data_->b_input;
#line 156 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					_data_->_tmp24_ = _data_->b_data;
#line 156 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					_data_->_tmp24__length1 = _data_->b_data_length1;
#line 156 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					_data_->_state_ = 4;
#line 156 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					g_input_stream_read_async (_data_->_tmp23_, _data_->_tmp24_, (gsize) _data_->_tmp24__length1, G_PRIORITY_DEFAULT, NULL, folks_test_utils_loadable_icons_content_equal_ready, _data_);
#line 156 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					return FALSE;
#line 1024 "test-utils.c"
					_state_4:
#line 156 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					_data_->_tmp25_ = g_input_stream_read_finish (_data_->_tmp23_, _data_->_res_, &_data_->_inner_error_);
#line 156 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					_data_->b_read_size = _data_->_tmp25_;
#line 156 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 156 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_data_->b_data = (g_free (_data_->b_data), NULL);
#line 156 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_data_->a_data = (g_free (_data_->a_data), NULL);
#line 156 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_g_object_unref0 (_data_->b_input);
#line 156 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_g_free0 (_data_->b_type);
#line 156 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_g_object_unref0 (_data_->a_input);
#line 156 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_g_free0 (_data_->a_type);
#line 1044 "test-utils.c"
						goto __catch1_g_error;
					}
#line 158 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					_data_->_tmp27_ = _data_->a_read_size;
#line 158 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					_data_->_tmp28_ = _data_->b_read_size;
#line 158 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					if (_data_->_tmp27_ != ((gsize) _data_->_tmp28_)) {
#line 158 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_data_->_tmp26_ = TRUE;
#line 1055 "test-utils.c"
					} else {
#line 159 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_data_->_tmp29_ = _data_->a_data;
#line 159 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_data_->_tmp29__length1 = _data_->a_data_length1;
#line 159 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_data_->_tmp30_ = _data_->b_data;
#line 159 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_data_->_tmp30__length1 = _data_->b_data_length1;
#line 159 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_data_->_tmp31_ = _data_->a_read_size;
#line 159 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_data_->_tmp32_ = memcmp (_data_->_tmp29_, _data_->_tmp30_, _data_->_tmp31_);
#line 159 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_data_->_tmp26_ = _data_->_tmp32_ != 0;
#line 1071 "test-utils.c"
					}
#line 158 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
					if (_data_->_tmp26_) {
#line 161 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						_data_->retval = FALSE;
#line 162 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
						break;
#line 1079 "test-utils.c"
					}
				}
			}
#line 167 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp33_ = _data_->a_input;
#line 167 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_state_ = 5;
#line 167 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			g_input_stream_close_async (_data_->_tmp33_, G_PRIORITY_DEFAULT, NULL, folks_test_utils_loadable_icons_content_equal_ready, _data_);
#line 167 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			return FALSE;
#line 1091 "test-utils.c"
			_state_5:
#line 167 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			g_input_stream_close_finish (_data_->_tmp33_, _data_->_res_, &_data_->_inner_error_);
#line 167 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 167 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_data_->b_data = (g_free (_data_->b_data), NULL);
#line 167 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_data_->a_data = (g_free (_data_->a_data), NULL);
#line 167 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_object_unref0 (_data_->b_input);
#line 167 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_free0 (_data_->b_type);
#line 167 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_object_unref0 (_data_->a_input);
#line 167 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_free0 (_data_->a_type);
#line 1109 "test-utils.c"
				goto __catch1_g_error;
			}
#line 168 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp34_ = _data_->b_input;
#line 168 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_state_ = 6;
#line 168 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			g_input_stream_close_async (_data_->_tmp34_, G_PRIORITY_DEFAULT, NULL, folks_test_utils_loadable_icons_content_equal_ready, _data_);
#line 168 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			return FALSE;
#line 1120 "test-utils.c"
			_state_6:
#line 168 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			g_input_stream_close_finish (_data_->_tmp34_, _data_->_res_, &_data_->_inner_error_);
#line 168 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 168 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_data_->b_data = (g_free (_data_->b_data), NULL);
#line 168 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_data_->a_data = (g_free (_data_->a_data), NULL);
#line 168 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_object_unref0 (_data_->b_input);
#line 168 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_free0 (_data_->b_type);
#line 168 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_object_unref0 (_data_->a_input);
#line 168 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_free0 (_data_->a_type);
#line 1138 "test-utils.c"
				goto __catch1_g_error;
			}
#line 138 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->b_data = (g_free (_data_->b_data), NULL);
#line 138 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->a_data = (g_free (_data_->a_data), NULL);
#line 138 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_g_object_unref0 (_data_->b_input);
#line 138 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_g_free0 (_data_->b_type);
#line 138 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_g_object_unref0 (_data_->a_input);
#line 138 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_g_free0 (_data_->a_type);
#line 1153 "test-utils.c"
		}
		goto __finally1;
		__catch1_g_error:
		{
#line 138 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->e1 = _data_->_inner_error_;
#line 138 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_inner_error_ = NULL;
#line 172 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->retval = FALSE;
#line 173 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp35_ = _data_->e1->message;
#line 173 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			g_error ("test-utils.vala:173: Failed to read loadable icon for comparison: %s", _data_->_tmp35_);
#line 138 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_g_error_free0 (_data_->e1);
#line 1170 "test-utils.c"
		}
		__finally1:
#line 138 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 138 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
#line 138 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			g_clear_error (&_data_->_inner_error_);
#line 138 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			g_object_unref (_data_->_async_result);
#line 138 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			return FALSE;
#line 1183 "test-utils.c"
		}
	}
#line 178 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->result = _data_->retval;
#line 178 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 178 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_data_->_state_ != 0) {
#line 178 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		while (_data_->_task_complete_ != TRUE) {
#line 178 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1196 "test-utils.c"
		}
	}
#line 178 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_object_unref (_data_->_async_result);
#line 178 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return FALSE;
#line 1203 "test-utils.c"
}


static void folks_test_utils_backend_prepare_and_wait_for_quiescence_data_free (gpointer _data) {
	FolksTestUtilsBackendPrepareAndWaitForQuiescenceData* _data_;
	_data_ = _data;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_object_unref0 (_data_->backend);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_slice_free (FolksTestUtilsBackendPrepareAndWaitForQuiescenceData, _data_);
#line 1214 "test-utils.c"
}


static void folks_test_utils_backend_prepare_and_wait_for_quiescence_async_ready_wrapper (GObject *source_object, GAsyncResult *res, void *user_data) {
	FolksTestUtilsBackendPrepareAndWaitForQuiescenceData* _task_data_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_task_data_ = g_task_get_task_data (G_TASK (res));
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_task_data_->_callback_ != NULL) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_task_data_->_callback_ (source_object, res, user_data);
#line 1226 "test-utils.c"
	}
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_task_data_->_task_complete_ = TRUE;
#line 1230 "test-utils.c"
}


void folks_test_utils_backend_prepare_and_wait_for_quiescence (FolksBackend* backend, GAsyncReadyCallback _callback_, gpointer _user_data_) {
	FolksTestUtilsBackendPrepareAndWaitForQuiescenceData* _data_;
	FolksBackend* _tmp0_;
	FolksBackend* _tmp1_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_ = g_slice_new0 (FolksTestUtilsBackendPrepareAndWaitForQuiescenceData);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_callback_ = _callback_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_async_result = g_task_new (NULL, NULL, folks_test_utils_backend_prepare_and_wait_for_quiescence_async_ready_wrapper, _user_data_);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_callback_ == NULL) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_task_complete_ = TRUE;
#line 1248 "test-utils.c"
	}
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_task_set_task_data (_data_->_async_result, _data_, folks_test_utils_backend_prepare_and_wait_for_quiescence_data_free);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = backend;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_object_unref0 (_data_->backend);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->backend = _tmp1_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	folks_test_utils_backend_prepare_and_wait_for_quiescence_co (_data_);
#line 1262 "test-utils.c"
}


void folks_test_utils_backend_prepare_and_wait_for_quiescence_finish (GAsyncResult* _res_, GError** error) {
	FolksTestUtilsBackendPrepareAndWaitForQuiescenceData* _data_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (NULL == _data_) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return;
#line 1274 "test-utils.c"
	}
}


/**
   * Prepare a backend and wait for it to reach quiescence.
   *
   * This will prepare the given {@link Backend} then yield until it reaches
   * quiescence. No timeout is used, so if the backend never reaches quiescence,
   * this function will never return; callers must add their own timeout to
   * avoid this if necessary.
   *
   * When this returns, the backend is guaranteed to be quiescent.
   *
   * @param backend the backend to prepare
   */
static Block2Data* block2_data_ref (Block2Data* _data2_) {
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_atomic_int_inc (&_data2_->_ref_count_);
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return _data2_;
#line 1296 "test-utils.c"
}


static void block2_data_unref (void * _userdata_) {
	Block2Data* _data2_;
	_data2_ = (Block2Data*) _userdata_;
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (g_atomic_int_dec_and_test (&_data2_->_ref_count_)) {
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_slice_free (Block2Data, _data2_);
#line 1307 "test-utils.c"
	}
}


static void __lambda6_ (Block2Data* _data2_, GObject* obj, GParamSpec* pspec) {
	gboolean _tmp0_;
#line 197 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_if_fail (obj != NULL);
#line 197 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_if_fail (pspec != NULL);
#line 199 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = _data2_->has_yielded;
#line 199 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_tmp0_ == TRUE) {
#line 201 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		folks_test_utils_backend_prepare_and_wait_for_quiescence_co (_data2_->_async_data_);
#line 1324 "test-utils.c"
	}
}


static void ___lambda6__g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self) {
#line 197 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	__lambda6_ (self, _sender, pspec);
#line 1332 "test-utils.c"
}


static void folks_test_utils_backend_prepare_and_wait_for_quiescence_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_) {
	FolksTestUtilsBackendPrepareAndWaitForQuiescenceData* _data_;
#line 207 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_ = _user_data_;
#line 207 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_source_object_ = source_object;
#line 207 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_res_ = _res_;
#line 207 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_task_complete_ = TRUE;
#line 207 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	folks_test_utils_backend_prepare_and_wait_for_quiescence_co (_data_);
#line 1348 "test-utils.c"
}


static gboolean folks_test_utils_backend_prepare_and_wait_for_quiescence_co (FolksTestUtilsBackendPrepareAndWaitForQuiescenceData* _data_) {
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	switch (_data_->_state_) {
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 0:
#line 1357 "test-utils.c"
		goto _state_0;
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 1:
#line 1361 "test-utils.c"
		goto _state_1;
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 2:
#line 1365 "test-utils.c"
		goto _state_2;
		default:
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_assert_not_reached ();
#line 1370 "test-utils.c"
	}
	_state_0:
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data2_ = g_slice_new0 (Block2Data);
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data2_->_ref_count_ = 1;
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data2_->_async_data_ = _data_;
#line 196 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data2_->has_yielded = FALSE;
#line 197 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp0_ = _data_->backend;
#line 197 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp1_ = g_signal_connect_data ((GObject*) _data_->_tmp0_, "notify::is-quiescent", (GCallback) ___lambda6__g_object_notify, block2_data_ref (_data_->_data2_), (GClosureNotify) block2_data_unref, 0);
#line 197 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->signal_id = _data_->_tmp1_;
#line 1387 "test-utils.c"
	{
#line 207 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp2_ = _data_->backend;
#line 207 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_state_ = 1;
#line 207 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		folks_backend_prepare (_data_->_tmp2_, folks_test_utils_backend_prepare_and_wait_for_quiescence_ready, _data_);
#line 207 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return FALSE;
#line 1397 "test-utils.c"
		_state_1:
#line 207 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		folks_backend_prepare_finish (_data_->_tmp2_, _data_->_res_, &_data_->_inner_error_);
#line 207 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 1403 "test-utils.c"
			goto __finally2;
		}
#line 209 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp3_ = _data_->backend;
#line 209 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp4_ = folks_backend_get_is_quiescent (_data_->_tmp3_);
#line 209 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp5_ = _data_->_tmp4_;
#line 209 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		if (_data_->_tmp5_ == FALSE) {
#line 211 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_data2_->has_yielded = TRUE;
#line 212 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_state_ = 2;
#line 212 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			return FALSE;
#line 1420 "test-utils.c"
			_state_2:
			;
		}
	}
	__finally2:
	{
#line 217 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp6_ = _data_->backend;
#line 217 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp7_ = _data_->signal_id;
#line 217 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_signal_handler_disconnect ((GObject*) _data_->_tmp6_, _data_->_tmp7_);
#line 218 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp8_ = _data_->backend;
#line 218 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp9_ = folks_backend_get_is_quiescent (_data_->_tmp8_);
#line 218 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp10_ = _data_->_tmp9_;
#line 218 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_vala_assert (_data_->_tmp10_ == TRUE, "backend.is_quiescent == true");
#line 1441 "test-utils.c"
	}
#line 205 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 205 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_task_return_error (_data_->_async_result, _data_->_inner_error_);
#line 205 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		block2_data_unref (_data_->_data2_);
#line 205 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_data2_ = NULL;
#line 205 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_object_unref (_data_->_async_result);
#line 205 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return FALSE;
#line 1455 "test-utils.c"
	}
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	block2_data_unref (_data_->_data2_);
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data2_ = NULL;
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_data_->_state_ != 0) {
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		while (_data_->_task_complete_ != TRUE) {
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1469 "test-utils.c"
		}
	}
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_object_unref (_data_->_async_result);
#line 193 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return FALSE;
#line 1476 "test-utils.c"
}


static void folks_test_utils_aggregator_prepare_and_wait_for_quiescence_data_free (gpointer _data) {
	FolksTestUtilsAggregatorPrepareAndWaitForQuiescenceData* _data_;
	_data_ = _data;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_object_unref0 (_data_->aggregator);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_slice_free (FolksTestUtilsAggregatorPrepareAndWaitForQuiescenceData, _data_);
#line 1487 "test-utils.c"
}


static void folks_test_utils_aggregator_prepare_and_wait_for_quiescence_async_ready_wrapper (GObject *source_object, GAsyncResult *res, void *user_data) {
	FolksTestUtilsAggregatorPrepareAndWaitForQuiescenceData* _task_data_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_task_data_ = g_task_get_task_data (G_TASK (res));
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_task_data_->_callback_ != NULL) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_task_data_->_callback_ (source_object, res, user_data);
#line 1499 "test-utils.c"
	}
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_task_data_->_task_complete_ = TRUE;
#line 1503 "test-utils.c"
}


void folks_test_utils_aggregator_prepare_and_wait_for_quiescence (FolksIndividualAggregator* aggregator, GAsyncReadyCallback _callback_, gpointer _user_data_) {
	FolksTestUtilsAggregatorPrepareAndWaitForQuiescenceData* _data_;
	FolksIndividualAggregator* _tmp0_;
	FolksIndividualAggregator* _tmp1_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_ = g_slice_new0 (FolksTestUtilsAggregatorPrepareAndWaitForQuiescenceData);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_callback_ = _callback_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_async_result = g_task_new (NULL, NULL, folks_test_utils_aggregator_prepare_and_wait_for_quiescence_async_ready_wrapper, _user_data_);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_callback_ == NULL) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_task_complete_ = TRUE;
#line 1521 "test-utils.c"
	}
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_task_set_task_data (_data_->_async_result, _data_, folks_test_utils_aggregator_prepare_and_wait_for_quiescence_data_free);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = aggregator;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_object_unref0 (_data_->aggregator);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->aggregator = _tmp1_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	folks_test_utils_aggregator_prepare_and_wait_for_quiescence_co (_data_);
#line 1535 "test-utils.c"
}


void folks_test_utils_aggregator_prepare_and_wait_for_quiescence_finish (GAsyncResult* _res_, GError** error) {
	FolksTestUtilsAggregatorPrepareAndWaitForQuiescenceData* _data_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (NULL == _data_) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return;
#line 1547 "test-utils.c"
	}
}


/**
   * Prepare an aggregator and wait for it to reach quiescence.
   *
   * This will prepare the given {@link IndividualAggregator} then yield until
   * it reaches quiescence. No timeout is used, so if the aggregator never
   * reaches quiescence, this function will never return; callers must add their
   * own timeout to avoid this if necessary.
   *
   * When this returns, the aggregator is guaranteed to be quiescent.
   *
   * @param aggregator the aggregator to prepare
   */
static Block3Data* block3_data_ref (Block3Data* _data3_) {
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_atomic_int_inc (&_data3_->_ref_count_);
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return _data3_;
#line 1569 "test-utils.c"
}


static void block3_data_unref (void * _userdata_) {
	Block3Data* _data3_;
	_data3_ = (Block3Data*) _userdata_;
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (g_atomic_int_dec_and_test (&_data3_->_ref_count_)) {
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_slice_free (Block3Data, _data3_);
#line 1580 "test-utils.c"
	}
}


static void __lambda7_ (Block3Data* _data3_, GObject* obj, GParamSpec* pspec) {
	gboolean _tmp0_;
#line 238 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_if_fail (obj != NULL);
#line 238 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_if_fail (pspec != NULL);
#line 240 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = _data3_->has_yielded;
#line 240 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_tmp0_ == TRUE) {
#line 242 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		folks_test_utils_aggregator_prepare_and_wait_for_quiescence_co (_data3_->_async_data_);
#line 1597 "test-utils.c"
	}
}


static void ___lambda7__g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self) {
#line 238 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	__lambda7_ (self, _sender, pspec);
#line 1605 "test-utils.c"
}


static void folks_test_utils_aggregator_prepare_and_wait_for_quiescence_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_) {
	FolksTestUtilsAggregatorPrepareAndWaitForQuiescenceData* _data_;
#line 248 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_ = _user_data_;
#line 248 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_source_object_ = source_object;
#line 248 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_res_ = _res_;
#line 248 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_task_complete_ = TRUE;
#line 248 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	folks_test_utils_aggregator_prepare_and_wait_for_quiescence_co (_data_);
#line 1621 "test-utils.c"
}


static gboolean folks_test_utils_aggregator_prepare_and_wait_for_quiescence_co (FolksTestUtilsAggregatorPrepareAndWaitForQuiescenceData* _data_) {
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	switch (_data_->_state_) {
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 0:
#line 1630 "test-utils.c"
		goto _state_0;
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 1:
#line 1634 "test-utils.c"
		goto _state_1;
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 2:
#line 1638 "test-utils.c"
		goto _state_2;
		default:
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_assert_not_reached ();
#line 1643 "test-utils.c"
	}
	_state_0:
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data3_ = g_slice_new0 (Block3Data);
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data3_->_ref_count_ = 1;
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data3_->_async_data_ = _data_;
#line 237 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data3_->has_yielded = FALSE;
#line 238 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp0_ = _data_->aggregator;
#line 238 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp1_ = g_signal_connect_data ((GObject*) _data_->_tmp0_, "notify::is-quiescent", (GCallback) ___lambda7__g_object_notify, block3_data_ref (_data_->_data3_), (GClosureNotify) block3_data_unref, 0);
#line 238 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->signal_id = _data_->_tmp1_;
#line 1660 "test-utils.c"
	{
#line 248 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp2_ = _data_->aggregator;
#line 248 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_state_ = 1;
#line 248 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		folks_individual_aggregator_prepare (_data_->_tmp2_, folks_test_utils_aggregator_prepare_and_wait_for_quiescence_ready, _data_);
#line 248 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return FALSE;
#line 1670 "test-utils.c"
		_state_1:
#line 248 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		folks_individual_aggregator_prepare_finish (_data_->_tmp2_, _data_->_res_, &_data_->_inner_error_);
#line 248 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 1676 "test-utils.c"
			goto __finally3;
		}
#line 250 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp3_ = _data_->aggregator;
#line 250 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp4_ = folks_individual_aggregator_get_is_quiescent (_data_->_tmp3_);
#line 250 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp5_ = _data_->_tmp4_;
#line 250 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		if (_data_->_tmp5_ == FALSE) {
#line 252 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_data3_->has_yielded = TRUE;
#line 253 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_state_ = 2;
#line 253 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			return FALSE;
#line 1693 "test-utils.c"
			_state_2:
			;
		}
	}
	__finally3:
	{
#line 258 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp6_ = _data_->aggregator;
#line 258 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp7_ = _data_->signal_id;
#line 258 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_signal_handler_disconnect ((GObject*) _data_->_tmp6_, _data_->_tmp7_);
#line 259 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp8_ = _data_->aggregator;
#line 259 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp9_ = folks_individual_aggregator_get_is_quiescent (_data_->_tmp8_);
#line 259 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp10_ = _data_->_tmp9_;
#line 259 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_vala_assert (_data_->_tmp10_ == TRUE, "aggregator.is_quiescent == true");
#line 1714 "test-utils.c"
	}
#line 246 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 246 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_task_return_error (_data_->_async_result, _data_->_inner_error_);
#line 246 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		block3_data_unref (_data_->_data3_);
#line 246 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_data3_ = NULL;
#line 246 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_object_unref (_data_->_async_result);
#line 246 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return FALSE;
#line 1728 "test-utils.c"
	}
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	block3_data_unref (_data_->_data3_);
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data3_ = NULL;
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_data_->_state_ != 0) {
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		while (_data_->_task_complete_ != TRUE) {
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1742 "test-utils.c"
		}
	}
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_object_unref (_data_->_async_result);
#line 234 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return FALSE;
#line 1749 "test-utils.c"
}


static void folks_test_utils_aggregator_prepare_and_wait_for_individuals_data_free (gpointer _data) {
	FolksTestUtilsAggregatorPrepareAndWaitForIndividualsData* _data_;
	_data_ = _data;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_object_unref0 (_data_->aggregator);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_slice_free (FolksTestUtilsAggregatorPrepareAndWaitForIndividualsData, _data_);
#line 1760 "test-utils.c"
}


static void folks_test_utils_aggregator_prepare_and_wait_for_individuals_async_ready_wrapper (GObject *source_object, GAsyncResult *res, void *user_data) {
	FolksTestUtilsAggregatorPrepareAndWaitForIndividualsData* _task_data_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_task_data_ = g_task_get_task_data (G_TASK (res));
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_task_data_->_callback_ != NULL) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_task_data_->_callback_ (source_object, res, user_data);
#line 1772 "test-utils.c"
	}
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_task_data_->_task_complete_ = TRUE;
#line 1776 "test-utils.c"
}


void folks_test_utils_aggregator_prepare_and_wait_for_individuals (FolksIndividualAggregator* aggregator, gchar** expected_persona_names, int expected_persona_names_length1, GAsyncReadyCallback _callback_, gpointer _user_data_) {
	FolksTestUtilsAggregatorPrepareAndWaitForIndividualsData* _data_;
	FolksIndividualAggregator* _tmp0_;
	FolksIndividualAggregator* _tmp1_;
	gchar** _tmp2_;
	gint _tmp2__length1;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_ = g_slice_new0 (FolksTestUtilsAggregatorPrepareAndWaitForIndividualsData);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_callback_ = _callback_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_async_result = g_task_new (NULL, NULL, folks_test_utils_aggregator_prepare_and_wait_for_individuals_async_ready_wrapper, _user_data_);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_callback_ == NULL) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_task_complete_ = TRUE;
#line 1796 "test-utils.c"
	}
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_task_set_task_data (_data_->_async_result, _data_, folks_test_utils_aggregator_prepare_and_wait_for_individuals_data_free);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = aggregator;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_object_unref0 (_data_->aggregator);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->aggregator = _tmp1_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp2_ = expected_persona_names;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp2__length1 = expected_persona_names_length1;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->expected_persona_names = _tmp2_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->expected_persona_names_length1 = _tmp2__length1;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	folks_test_utils_aggregator_prepare_and_wait_for_individuals_co (_data_);
#line 1818 "test-utils.c"
}


void folks_test_utils_aggregator_prepare_and_wait_for_individuals_finish (GAsyncResult* _res_, GError** error) {
	FolksTestUtilsAggregatorPrepareAndWaitForIndividualsData* _data_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (NULL == _data_) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return;
#line 1830 "test-utils.c"
	}
}


/**
   * Prepare an aggregator and wait for the given personas to be added to it.
   *
   * This will prepare the given {@link IndividualAggregator} then yield until
   * all of the personas listed in ``expected_persona_names`` are added to it.
   * Each of the personas must be added in its own {@link Individual} (i.e. no
   * personas may be linked) and only additions can occur  no personas may be
   * removed. Accordingly, this function is intended for testing the behaviour
   * of a single {@link PersonaStore} without linking.
   *
   * No timeout is used, so if the aggregator never adds all the expected
   * personas, this function will never return; callers must add their own
   * timeout to avoid this if necessary. On return from this function, all of
   * the given names are guaranteed to exist in the aggregator.
   *
   * The names in ``expected_persona_names`` must be those appearing in the
   * {@link NameDetails.full_name} property of the personas (and hence of the
   * individuals).
   *
   * When this returns, the aggregator is //not// guaranteed to be quiescent.
   *
   * @param aggregator the aggregator to prepare
   * @param expected_persona_names set of full names of the expected personas
   * @throws GLib.Error if preparing the aggregator failed
   *
   * @since 0.9.7
   */
static Block4Data* block4_data_ref (Block4Data* _data4_) {
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_atomic_int_inc (&_data4_->_ref_count_);
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return _data4_;
#line 1867 "test-utils.c"
}


static void block4_data_unref (void * _userdata_) {
	Block4Data* _data4_;
	_data4_ = (Block4Data*) _userdata_;
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (g_atomic_int_dec_and_test (&_data4_->_ref_count_)) {
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_g_object_unref0 (_data4_->expected);
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_slice_free (Block4Data, _data4_);
#line 1880 "test-utils.c"
	}
}


static void __lambda8_ (Block4Data* _data4_, GeeMultiMap* changes) {
	GeeCollection* added = NULL;
	GeeMultiMap* _tmp0_;
	GeeCollection* _tmp1_;
	GeeSet* removed = NULL;
	GeeMultiMap* _tmp2_;
	GeeSet* _tmp3_;
	GeeSet* _tmp26_;
	gint _tmp27_;
	gint _tmp28_;
	gboolean _tmp36_ = FALSE;
	GeeHashSet* _tmp37_;
	gint _tmp38_;
	gint _tmp39_;
#line 305 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_if_fail (changes != NULL);
#line 307 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = changes;
#line 307 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp1_ = gee_multi_map_get_values (_tmp0_);
#line 307 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	added = _tmp1_;
#line 308 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp2_ = changes;
#line 308 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp3_ = gee_multi_map_get_keys (_tmp2_);
#line 308 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	removed = _tmp3_;
#line 1913 "test-utils.c"
	{
		GeeIterator* _i_it = NULL;
		GeeCollection* _tmp4_;
		GeeIterator* _tmp5_;
#line 310 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp4_ = added;
#line 310 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp5_ = gee_iterable_iterator ((GeeIterable*) _tmp4_);
#line 310 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_i_it = _tmp5_;
#line 310 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		while (TRUE) {
#line 1926 "test-utils.c"
			GeeIterator* _tmp6_;
			gboolean _tmp7_;
			FolksIndividual* i = NULL;
			GeeIterator* _tmp8_;
			gpointer _tmp9_;
			FolksIndividual* _tmp10_;
			FolksIndividual* _tmp11_;
			GeeSet* _tmp12_;
			GeeSet* _tmp13_;
			gint _tmp14_;
			gint _tmp15_;
			FolksNameDetails* name_details = NULL;
			FolksIndividual* _tmp16_;
			FolksNameDetails* _tmp17_;
			FolksNameDetails* _tmp18_;
			GeeHashSet* _tmp19_;
			FolksNameDetails* _tmp20_;
			const gchar* _tmp21_;
			const gchar* _tmp22_;
			FolksNameDetails* _tmp23_;
			const gchar* _tmp24_;
			const gchar* _tmp25_;
#line 310 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp6_ = _i_it;
#line 310 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp7_ = gee_iterator_next (_tmp6_);
#line 310 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			if (!_tmp7_) {
#line 310 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				break;
#line 1957 "test-utils.c"
			}
#line 310 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp8_ = _i_it;
#line 310 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp9_ = gee_iterator_get (_tmp8_);
#line 310 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			i = (FolksIndividual*) _tmp9_;
#line 312 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp10_ = i;
#line 312 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_vala_assert (_tmp10_ != NULL, "i != null");
#line 313 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp11_ = i;
#line 313 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp12_ = folks_individual_get_personas (_tmp11_);
#line 313 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp13_ = _tmp12_;
#line 313 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp14_ = gee_collection_get_size ((GeeCollection*) _tmp13_);
#line 313 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp15_ = _tmp14_;
#line 313 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_vala_assert (_tmp15_ == 1, "i.personas.size == 1");
#line 315 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp16_ = i;
#line 315 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp17_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp16_, FOLKS_TYPE_NAME_DETAILS) ? ((FolksNameDetails*) _tmp16_) : NULL);
#line 315 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			name_details = _tmp17_;
#line 316 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp18_ = name_details;
#line 316 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_vala_assert (_tmp18_ != NULL, "name_details != null");
#line 317 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp19_ = _data4_->expected;
#line 317 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp20_ = name_details;
#line 317 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp21_ = folks_name_details_get_full_name (_tmp20_);
#line 317 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp22_ = _tmp21_;
#line 317 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			gee_abstract_collection_remove ((GeeAbstractCollection*) _tmp19_, _tmp22_);
#line 319 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp23_ = name_details;
#line 319 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp24_ = folks_name_details_get_full_name (_tmp23_);
#line 319 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp25_ = _tmp24_;
#line 319 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			g_debug ("test-utils.vala:319: Saw individual %s", _tmp25_);
#line 310 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_g_object_unref0 (name_details);
#line 310 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_g_object_unref0 (i);
#line 2013 "test-utils.c"
		}
#line 310 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_g_object_unref0 (_i_it);
#line 2017 "test-utils.c"
	}
#line 322 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp26_ = removed;
#line 322 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp27_ = gee_collection_get_size ((GeeCollection*) _tmp26_);
#line 322 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp28_ = _tmp27_;
#line 322 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_vala_assert (_tmp28_ == 1, "removed.size == 1");
#line 2027 "test-utils.c"
	{
		GeeIterator* _i_it = NULL;
		GeeSet* _tmp29_;
		GeeIterator* _tmp30_;
#line 324 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp29_ = removed;
#line 324 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp30_ = gee_iterable_iterator ((GeeIterable*) _tmp29_);
#line 324 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_i_it = _tmp30_;
#line 324 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		while (TRUE) {
#line 2040 "test-utils.c"
			GeeIterator* _tmp31_;
			gboolean _tmp32_;
			FolksIndividual* i = NULL;
			GeeIterator* _tmp33_;
			gpointer _tmp34_;
			FolksIndividual* _tmp35_;
#line 324 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp31_ = _i_it;
#line 324 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp32_ = gee_iterator_next (_tmp31_);
#line 324 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			if (!_tmp32_) {
#line 324 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				break;
#line 2055 "test-utils.c"
			}
#line 324 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp33_ = _i_it;
#line 324 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp34_ = gee_iterator_get (_tmp33_);
#line 324 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			i = (FolksIndividual*) _tmp34_;
#line 325 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp35_ = i;
#line 325 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_vala_assert (_tmp35_ == NULL, "i == null");
#line 324 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_g_object_unref0 (i);
#line 2069 "test-utils.c"
		}
#line 324 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_g_object_unref0 (_i_it);
#line 2073 "test-utils.c"
	}
#line 328 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp37_ = _data4_->expected;
#line 328 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp38_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp37_);
#line 328 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp39_ = _tmp38_;
#line 328 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_tmp39_ == 0) {
#line 2083 "test-utils.c"
		gboolean _tmp40_;
#line 328 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp40_ = _data4_->has_yielded;
#line 328 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp36_ = _tmp40_ == TRUE;
#line 2089 "test-utils.c"
	} else {
#line 328 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp36_ = FALSE;
#line 2093 "test-utils.c"
	}
#line 328 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_tmp36_) {
#line 329 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		folks_test_utils_aggregator_prepare_and_wait_for_individuals_co (_data4_->_async_data_);
#line 2099 "test-utils.c"
	}
#line 305 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_object_unref0 (removed);
#line 305 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_object_unref0 (added);
#line 2105 "test-utils.c"
}


static void ___lambda8__folks_individual_aggregator_individuals_changed_detailed (FolksIndividualAggregator* _sender, GeeMultiMap* changes, gpointer self) {
#line 304 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	__lambda8_ (self, changes);
#line 2112 "test-utils.c"
}


static void folks_test_utils_aggregator_prepare_and_wait_for_individuals_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_) {
	FolksTestUtilsAggregatorPrepareAndWaitForIndividualsData* _data_;
#line 334 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_ = _user_data_;
#line 334 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_source_object_ = source_object;
#line 334 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_res_ = _res_;
#line 334 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_task_complete_ = TRUE;
#line 334 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	folks_test_utils_aggregator_prepare_and_wait_for_individuals_co (_data_);
#line 2128 "test-utils.c"
}


static gboolean folks_test_utils_aggregator_prepare_and_wait_for_individuals_co (FolksTestUtilsAggregatorPrepareAndWaitForIndividualsData* _data_) {
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	switch (_data_->_state_) {
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 0:
#line 2137 "test-utils.c"
		goto _state_0;
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 1:
#line 2141 "test-utils.c"
		goto _state_1;
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 2:
#line 2145 "test-utils.c"
		goto _state_2;
		default:
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_assert_not_reached ();
#line 2150 "test-utils.c"
	}
	_state_0:
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data4_ = g_slice_new0 (Block4Data);
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data4_->_ref_count_ = 1;
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data4_->_async_data_ = _data_;
#line 294 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp0_ = gee_hash_set_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, NULL, NULL, NULL, NULL, NULL, NULL);
#line 294 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data4_->expected = _data_->_tmp0_;
#line 295 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data4_->has_yielded = FALSE;
#line 297 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp1_ = _data_->expected_persona_names;
#line 297 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp1__length1 = _data_->expected_persona_names_length1;
#line 2169 "test-utils.c"
	{
#line 297 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->name_collection_length1 = 0;
#line 297 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_name_collection_size_ = 0;
#line 297 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->name_collection = _data_->_tmp1_;
#line 297 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->name_collection_length1 = _data_->_tmp1__length1;
#line 297 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		for (_data_->name_it = 0; _data_->name_it < _data_->_tmp1__length1; _data_->name_it = _data_->name_it + 1) {
#line 297 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp2_ = g_strdup (_data_->name_collection[_data_->name_it]);
#line 297 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->name = _data_->_tmp2_;
#line 2185 "test-utils.c"
			{
#line 299 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_data_->_tmp3_ = _data_->name;
#line 299 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				g_debug ("test-utils.vala:299: Waiting for %s", _data_->_tmp3_);
#line 300 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_data_->_tmp4_ = _data_->_data4_->expected;
#line 300 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_data_->_tmp5_ = _data_->name;
#line 300 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				gee_abstract_collection_add ((GeeAbstractCollection*) _data_->_tmp4_, _data_->_tmp5_);
#line 297 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_free0 (_data_->name);
#line 2199 "test-utils.c"
			}
		}
	}
#line 304 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp6_ = _data_->aggregator;
#line 304 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp7_ = g_signal_connect_data (_data_->_tmp6_, "individuals-changed-detailed", (GCallback) ___lambda8__folks_individual_aggregator_individuals_changed_detailed, block4_data_ref (_data_->_data4_), (GClosureNotify) block4_data_unref, 0);
#line 304 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->signal_id = _data_->_tmp7_;
#line 2209 "test-utils.c"
	{
#line 334 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp8_ = _data_->aggregator;
#line 334 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_state_ = 1;
#line 334 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		folks_individual_aggregator_prepare (_data_->_tmp8_, folks_test_utils_aggregator_prepare_and_wait_for_individuals_ready, _data_);
#line 334 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return FALSE;
#line 2219 "test-utils.c"
		_state_1:
#line 334 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		folks_individual_aggregator_prepare_finish (_data_->_tmp8_, _data_->_res_, &_data_->_inner_error_);
#line 334 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 2225 "test-utils.c"
			goto __finally4;
		}
#line 336 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp9_ = _data_->_data4_->expected;
#line 336 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp10_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _data_->_tmp9_);
#line 336 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp11_ = _data_->_tmp10_;
#line 336 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		if (_data_->_tmp11_ != 0) {
#line 338 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_data4_->has_yielded = TRUE;
#line 339 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_state_ = 2;
#line 339 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			return FALSE;
#line 2242 "test-utils.c"
			_state_2:
			;
		}
	}
	__finally4:
	{
#line 344 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp12_ = _data_->aggregator;
#line 344 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp13_ = _data_->signal_id;
#line 344 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_signal_handler_disconnect ((GObject*) _data_->_tmp12_, _data_->_tmp13_);
#line 345 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp14_ = _data_->_data4_->expected;
#line 345 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp15_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _data_->_tmp14_);
#line 345 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp16_ = _data_->_tmp15_;
#line 345 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_vala_assert (_data_->_tmp16_ == 0, "expected.size == 0");
#line 2263 "test-utils.c"
	}
#line 332 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 332 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_task_return_error (_data_->_async_result, _data_->_inner_error_);
#line 332 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		block4_data_unref (_data_->_data4_);
#line 332 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_data4_ = NULL;
#line 332 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_object_unref (_data_->_async_result);
#line 332 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return FALSE;
#line 2277 "test-utils.c"
	}
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	block4_data_unref (_data_->_data4_);
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data4_ = NULL;
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_data_->_state_ != 0) {
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		while (_data_->_task_complete_ != TRUE) {
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2291 "test-utils.c"
		}
	}
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_object_unref (_data_->_async_result);
#line 290 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return FALSE;
#line 2298 "test-utils.c"
}


static void folks_test_utils_aggregator_wait_for_individuals_data_free (gpointer _data) {
	FolksTestUtilsAggregatorWaitForIndividualsData* _data_;
	_data_ = _data;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_object_unref0 (_data_->aggregator);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_slice_free (FolksTestUtilsAggregatorWaitForIndividualsData, _data_);
#line 2309 "test-utils.c"
}


static void folks_test_utils_aggregator_wait_for_individuals_async_ready_wrapper (GObject *source_object, GAsyncResult *res, void *user_data) {
	FolksTestUtilsAggregatorWaitForIndividualsData* _task_data_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_task_data_ = g_task_get_task_data (G_TASK (res));
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_task_data_->_callback_ != NULL) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_task_data_->_callback_ (source_object, res, user_data);
#line 2321 "test-utils.c"
	}
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_task_data_->_task_complete_ = TRUE;
#line 2325 "test-utils.c"
}


void folks_test_utils_aggregator_wait_for_individuals (FolksIndividualAggregator* aggregator, gchar** expected_added_persona_names, int expected_added_persona_names_length1, gchar** expected_removed_persona_names, int expected_removed_persona_names_length1, GAsyncReadyCallback _callback_, gpointer _user_data_) {
	FolksTestUtilsAggregatorWaitForIndividualsData* _data_;
	FolksIndividualAggregator* _tmp0_;
	FolksIndividualAggregator* _tmp1_;
	gchar** _tmp2_;
	gint _tmp2__length1;
	gchar** _tmp3_;
	gint _tmp3__length1;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_ = g_slice_new0 (FolksTestUtilsAggregatorWaitForIndividualsData);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_callback_ = _callback_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_async_result = g_task_new (NULL, NULL, folks_test_utils_aggregator_wait_for_individuals_async_ready_wrapper, _user_data_);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_callback_ == NULL) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_task_complete_ = TRUE;
#line 2347 "test-utils.c"
	}
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_task_set_task_data (_data_->_async_result, _data_, folks_test_utils_aggregator_wait_for_individuals_data_free);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = aggregator;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_object_unref0 (_data_->aggregator);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->aggregator = _tmp1_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp2_ = expected_added_persona_names;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp2__length1 = expected_added_persona_names_length1;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->expected_added_persona_names = _tmp2_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->expected_added_persona_names_length1 = _tmp2__length1;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp3_ = expected_removed_persona_names;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp3__length1 = expected_removed_persona_names_length1;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->expected_removed_persona_names = _tmp3_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->expected_removed_persona_names_length1 = _tmp3__length1;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	folks_test_utils_aggregator_wait_for_individuals_co (_data_);
#line 2377 "test-utils.c"
}


void folks_test_utils_aggregator_wait_for_individuals_finish (GAsyncResult* _res_) {
	FolksTestUtilsAggregatorWaitForIndividualsData* _data_;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
#line 2385 "test-utils.c"
}


/**
   * Wait for the given personas to be added to or removed from an aggregator.
   *
   * This will yield until all of the personas listed in
   * ``expected_added_persona_names`` are added to the aggregator; or until all
   * of the personas listed in ``expected_removed_persona_names`` are removed
   * from it. Only one of the two arrays may be non-empty; this method does not
   * currently implement checking of complex individual change notifications.
   *
   * No timeout is used, so if the aggregator never adds or removes all the
   * expected personas, this function will never return; callers must add their
   * own timeout to avoid this if necessary. On return from this function, all
   * of the given names are guaranteed to exist in the aggregator.
   *
   * The names in ``expected_added_persona_names`` and
   * ``expected_removed_persona_names`` must be those appearing in the
   * {@link NameDetails.full_name} property of the personas (and hence of the
   * individuals).
   *
   * @param aggregator the aggregator to check
   * @param expected_added_persona_names set of full names of the expected
   * personas to be added
   * @param expected_removed_persona_names set of full names of the expected
   * personas to be removed
   *
   * @since 0.9.7
   */
static Block5Data* block5_data_ref (Block5Data* _data5_) {
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_atomic_int_inc (&_data5_->_ref_count_);
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return _data5_;
#line 2421 "test-utils.c"
}


static void block5_data_unref (void * _userdata_) {
	Block5Data* _data5_;
	_data5_ = (Block5Data*) _userdata_;
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (g_atomic_int_dec_and_test (&_data5_->_ref_count_)) {
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_g_object_unref0 (_data5_->expected_removed);
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_g_object_unref0 (_data5_->expected_added);
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_slice_free (Block5Data, _data5_);
#line 2436 "test-utils.c"
	}
}


static void __lambda9_ (Block5Data* _data5_, GeeMultiMap* changes) {
	GeeCollection* added = NULL;
	GeeMultiMap* _tmp0_;
	GeeCollection* _tmp1_;
	GeeSet* removed = NULL;
	GeeMultiMap* _tmp2_;
	GeeSet* _tmp3_;
	gboolean _tmp40_ = FALSE;
	GeeHashSet* _tmp41_;
	gint _tmp42_;
	gint _tmp43_;
#line 394 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_if_fail (changes != NULL);
#line 396 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = changes;
#line 396 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp1_ = gee_multi_map_get_values (_tmp0_);
#line 396 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	added = _tmp1_;
#line 397 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp2_ = changes;
#line 397 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp3_ = gee_multi_map_get_keys (_tmp2_);
#line 397 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	removed = _tmp3_;
#line 2466 "test-utils.c"
	{
		GeeIterator* _i_it = NULL;
		GeeCollection* _tmp4_;
		GeeIterator* _tmp5_;
#line 399 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp4_ = added;
#line 399 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp5_ = gee_iterable_iterator ((GeeIterable*) _tmp4_);
#line 399 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_i_it = _tmp5_;
#line 399 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		while (TRUE) {
#line 2479 "test-utils.c"
			GeeIterator* _tmp6_;
			gboolean _tmp7_;
			FolksIndividual* i = NULL;
			GeeIterator* _tmp8_;
			gpointer _tmp9_;
			GeeHashSet* _tmp10_;
			gint _tmp11_;
			gint _tmp12_;
			FolksIndividual* _tmp14_;
			FolksNameDetails* name_details = NULL;
			FolksIndividual* _tmp15_;
			FolksNameDetails* _tmp16_;
			FolksNameDetails* _tmp17_;
			GeeHashSet* _tmp18_;
			FolksNameDetails* _tmp19_;
			const gchar* _tmp20_;
			const gchar* _tmp21_;
#line 399 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp6_ = _i_it;
#line 399 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp7_ = gee_iterator_next (_tmp6_);
#line 399 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			if (!_tmp7_) {
#line 399 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				break;
#line 2505 "test-utils.c"
			}
#line 399 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp8_ = _i_it;
#line 399 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp9_ = gee_iterator_get (_tmp8_);
#line 399 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			i = (FolksIndividual*) _tmp9_;
#line 401 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp10_ = _data5_->expected_added;
#line 401 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp11_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp10_);
#line 401 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp12_ = _tmp11_;
#line 401 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			if (_tmp12_ == 0) {
#line 2521 "test-utils.c"
				FolksIndividual* _tmp13_;
#line 403 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_tmp13_ = i;
#line 403 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_vala_assert (_tmp13_ == NULL, "i == null");
#line 404 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_object_unref0 (i);
#line 404 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				break;
#line 2531 "test-utils.c"
			}
#line 407 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp14_ = i;
#line 407 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_vala_assert (_tmp14_ != NULL, "i != null");
#line 409 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp15_ = i;
#line 409 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp16_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp15_, FOLKS_TYPE_NAME_DETAILS) ? ((FolksNameDetails*) _tmp15_) : NULL);
#line 409 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			name_details = _tmp16_;
#line 410 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp17_ = name_details;
#line 410 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_vala_assert (_tmp17_ != NULL, "name_details != null");
#line 411 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp18_ = _data5_->expected_added;
#line 411 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp19_ = name_details;
#line 411 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp20_ = folks_name_details_get_full_name (_tmp19_);
#line 411 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp21_ = _tmp20_;
#line 411 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			gee_abstract_collection_remove ((GeeAbstractCollection*) _tmp18_, _tmp21_);
#line 399 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_g_object_unref0 (name_details);
#line 399 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_g_object_unref0 (i);
#line 2561 "test-utils.c"
		}
#line 399 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_g_object_unref0 (_i_it);
#line 2565 "test-utils.c"
	}
	{
		GeeIterator* _i_it = NULL;
		GeeSet* _tmp22_;
		GeeIterator* _tmp23_;
#line 414 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp22_ = removed;
#line 414 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp23_ = gee_iterable_iterator ((GeeIterable*) _tmp22_);
#line 414 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_i_it = _tmp23_;
#line 414 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		while (TRUE) {
#line 2579 "test-utils.c"
			GeeIterator* _tmp24_;
			gboolean _tmp25_;
			FolksIndividual* i = NULL;
			GeeIterator* _tmp26_;
			gpointer _tmp27_;
			GeeHashSet* _tmp28_;
			gint _tmp29_;
			gint _tmp30_;
			FolksIndividual* _tmp32_;
			FolksNameDetails* name_details = NULL;
			FolksIndividual* _tmp33_;
			FolksNameDetails* _tmp34_;
			FolksNameDetails* _tmp35_;
			GeeHashSet* _tmp36_;
			FolksNameDetails* _tmp37_;
			const gchar* _tmp38_;
			const gchar* _tmp39_;
#line 414 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp24_ = _i_it;
#line 414 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp25_ = gee_iterator_next (_tmp24_);
#line 414 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			if (!_tmp25_) {
#line 414 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				break;
#line 2605 "test-utils.c"
			}
#line 414 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp26_ = _i_it;
#line 414 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp27_ = gee_iterator_get (_tmp26_);
#line 414 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			i = (FolksIndividual*) _tmp27_;
#line 416 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp28_ = _data5_->expected_removed;
#line 416 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp29_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp28_);
#line 416 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp30_ = _tmp29_;
#line 416 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			if (_tmp30_ == 0) {
#line 2621 "test-utils.c"
				FolksIndividual* _tmp31_;
#line 418 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_tmp31_ = i;
#line 418 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_vala_assert (_tmp31_ == NULL, "i == null");
#line 419 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_object_unref0 (i);
#line 419 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				break;
#line 2631 "test-utils.c"
			}
#line 422 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp32_ = i;
#line 422 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_vala_assert (_tmp32_ != NULL, "i != null");
#line 424 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp33_ = i;
#line 424 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp34_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp33_, FOLKS_TYPE_NAME_DETAILS) ? ((FolksNameDetails*) _tmp33_) : NULL);
#line 424 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			name_details = _tmp34_;
#line 425 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp35_ = name_details;
#line 425 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_vala_assert (_tmp35_ != NULL, "name_details != null");
#line 426 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp36_ = _data5_->expected_removed;
#line 426 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp37_ = name_details;
#line 426 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp38_ = folks_name_details_get_full_name (_tmp37_);
#line 426 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp39_ = _tmp38_;
#line 426 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			gee_abstract_collection_remove ((GeeAbstractCollection*) _tmp36_, _tmp39_);
#line 414 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_g_object_unref0 (name_details);
#line 414 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_g_object_unref0 (i);
#line 2661 "test-utils.c"
		}
#line 414 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_g_object_unref0 (_i_it);
#line 2665 "test-utils.c"
	}
#line 431 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp41_ = _data5_->expected_added;
#line 431 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp42_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp41_);
#line 431 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp43_ = _tmp42_;
#line 431 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_tmp43_ == 0) {
#line 2675 "test-utils.c"
		GeeHashSet* _tmp44_;
		gint _tmp45_;
		gint _tmp46_;
#line 431 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp44_ = _data5_->expected_removed;
#line 431 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp45_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp44_);
#line 431 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp46_ = _tmp45_;
#line 431 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp40_ = _tmp46_ == 0;
#line 2687 "test-utils.c"
	} else {
#line 431 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp40_ = FALSE;
#line 2691 "test-utils.c"
	}
#line 431 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_tmp40_) {
#line 432 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		folks_test_utils_aggregator_wait_for_individuals_co (_data5_->_async_data_);
#line 2697 "test-utils.c"
	}
#line 394 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_object_unref0 (removed);
#line 394 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_object_unref0 (added);
#line 2703 "test-utils.c"
}


static void ___lambda9__folks_individual_aggregator_individuals_changed_detailed (FolksIndividualAggregator* _sender, GeeMultiMap* changes, gpointer self) {
#line 393 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	__lambda9_ (self, changes);
#line 2710 "test-utils.c"
}


static gboolean folks_test_utils_aggregator_wait_for_individuals_co (FolksTestUtilsAggregatorWaitForIndividualsData* _data_) {
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	switch (_data_->_state_) {
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 0:
#line 2719 "test-utils.c"
		goto _state_0;
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		case 1:
#line 2723 "test-utils.c"
		goto _state_1;
		default:
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_assert_not_reached ();
#line 2728 "test-utils.c"
	}
	_state_0:
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data5_ = g_slice_new0 (Block5Data);
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data5_->_ref_count_ = 1;
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data5_->_async_data_ = _data_;
#line 381 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp1_ = _data_->expected_added_persona_names;
#line 381 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp1__length1 = _data_->expected_added_persona_names_length1;
#line 381 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_data_->_tmp1__length1 == 0) {
#line 381 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp0_ = TRUE;
#line 2745 "test-utils.c"
	} else {
#line 382 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp2_ = _data_->expected_removed_persona_names;
#line 382 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp2__length1 = _data_->expected_removed_persona_names_length1;
#line 382 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp0_ = _data_->_tmp2__length1 == 0;
#line 2753 "test-utils.c"
	}
#line 381 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_vala_assert (_data_->_tmp0_, "expected_added_persona_names.length == 0 ||               expected_removed_persona_names.length == 0");
#line 384 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp3_ = gee_hash_set_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, NULL, NULL, NULL, NULL, NULL, NULL);
#line 384 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data5_->expected_added = _data_->_tmp3_;
#line 385 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp4_ = gee_hash_set_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, NULL, NULL, NULL, NULL, NULL, NULL);
#line 385 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data5_->expected_removed = _data_->_tmp4_;
#line 387 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp5_ = _data_->expected_added_persona_names;
#line 387 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp5__length1 = _data_->expected_added_persona_names_length1;
#line 2769 "test-utils.c"
	{
#line 387 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->name_collection_length1 = 0;
#line 387 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_name_collection_size_ = 0;
#line 387 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->name_collection = _data_->_tmp5_;
#line 387 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->name_collection_length1 = _data_->_tmp5__length1;
#line 387 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		for (_data_->name_it = 0; _data_->name_it < _data_->_tmp5__length1; _data_->name_it = _data_->name_it + 1) {
#line 387 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp6_ = g_strdup (_data_->name_collection[_data_->name_it]);
#line 387 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->name = _data_->_tmp6_;
#line 2785 "test-utils.c"
			{
#line 388 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_data_->_tmp7_ = _data_->_data5_->expected_added;
#line 388 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_data_->_tmp8_ = _data_->name;
#line 388 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				gee_abstract_collection_add ((GeeAbstractCollection*) _data_->_tmp7_, _data_->_tmp8_);
#line 387 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_free0 (_data_->name);
#line 2795 "test-utils.c"
			}
		}
	}
#line 389 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp9_ = _data_->expected_removed_persona_names;
#line 389 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp9__length1 = _data_->expected_removed_persona_names_length1;
#line 2803 "test-utils.c"
	{
#line 389 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_vala1_name_collection_length1 = 0;
#line 389 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->__vala1_name_collection_size_ = 0;
#line 389 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_vala1_name_collection = _data_->_tmp9_;
#line 389 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_vala1_name_collection_length1 = _data_->_tmp9__length1;
#line 389 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		for (_data_->_vala1_name_it = 0; _data_->_vala1_name_it < _data_->_tmp9__length1; _data_->_vala1_name_it = _data_->_vala1_name_it + 1) {
#line 389 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_tmp10_ = g_strdup (_data_->_vala1_name_collection[_data_->_vala1_name_it]);
#line 389 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_data_->_vala1_name = _data_->_tmp10_;
#line 2819 "test-utils.c"
			{
#line 390 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_data_->_tmp11_ = _data_->_data5_->expected_removed;
#line 390 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_data_->_tmp12_ = _data_->_vala1_name;
#line 390 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				gee_abstract_collection_add ((GeeAbstractCollection*) _data_->_tmp11_, _data_->_tmp12_);
#line 389 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_free0 (_data_->_vala1_name);
#line 2829 "test-utils.c"
			}
		}
	}
#line 393 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp13_ = _data_->aggregator;
#line 393 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp14_ = g_signal_connect_data (_data_->_tmp13_, "individuals-changed-detailed", (GCallback) ___lambda9__folks_individual_aggregator_individuals_changed_detailed, block5_data_ref (_data_->_data5_), (GClosureNotify) block5_data_unref, 0);
#line 393 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->signal_id = _data_->_tmp14_;
#line 435 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_state_ = 1;
#line 435 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return FALSE;
#line 2843 "test-utils.c"
	_state_1:
	;
#line 437 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp15_ = _data_->aggregator;
#line 437 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp16_ = _data_->signal_id;
#line 437 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_signal_handler_disconnect ((GObject*) _data_->_tmp15_, _data_->_tmp16_);
#line 438 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp18_ = _data_->_data5_->expected_added;
#line 438 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp19_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _data_->_tmp18_);
#line 438 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_tmp20_ = _data_->_tmp19_;
#line 438 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_data_->_tmp20_ == 0) {
#line 438 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp21_ = _data_->_data5_->expected_removed;
#line 438 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp22_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _data_->_tmp21_);
#line 438 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp23_ = _data_->_tmp22_;
#line 438 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp17_ = _data_->_tmp23_ == 0;
#line 2868 "test-utils.c"
	} else {
#line 438 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_data_->_tmp17_ = FALSE;
#line 2872 "test-utils.c"
	}
#line 438 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_vala_assert (_data_->_tmp17_, "expected_added.size == 0 && expected_removed.size == 0");
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	block5_data_unref (_data_->_data5_);
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data_->_data5_ = NULL;
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_data_->_state_ != 0) {
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		while (_data_->_task_complete_ != TRUE) {
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2888 "test-utils.c"
		}
	}
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_object_unref (_data_->_async_result);
#line 376 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return FALSE;
#line 2895 "test-utils.c"
}


/**
   * Synchronously prepare an aggregator and wait for the given personas to be
   * added to it.
   *
   * This is a wrapper around
   * {@link TestUtils.aggregator_prepare_and_wait_for_individuals} and
   * {@link TestUtils.loop_run_with_timeout} which creates a main loop and runs
   * it until the given ``expected_persona_names`` are added to the
   * ``aggregator``. If an error occurs, an error message will be printed and
   * the program will abort.
   *
   * If ``timeout`` is specified, it will be passed to
   * {@link TestUtils.loop_run_with_timeout} as the test run timeout.
   *
   * See the documentation for
   * {@link TestUtils.aggregator_prepare_and_wait_for_individuals} for more
   * information.
   *
   * @param aggregator the aggregator to prepare
   * @param expected_persona_names set of full names of the expected personas
   *
   * @since 0.9.7
   */
static Block6Data* block6_data_ref (Block6Data* _data6_) {
#line 464 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_atomic_int_inc (&_data6_->_ref_count_);
#line 464 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return _data6_;
#line 2927 "test-utils.c"
}


static void block6_data_unref (void * _userdata_) {
	Block6Data* _data6_;
	_data6_ = (Block6Data*) _userdata_;
#line 464 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (g_atomic_int_dec_and_test (&_data6_->_ref_count_)) {
#line 464 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_g_main_loop_unref0 (_data6_->main_loop);
#line 464 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_slice_free (Block6Data, _data6_);
#line 2940 "test-utils.c"
	}
}


static void __lambda10_ (Block6Data* _data6_, GObject* o, GAsyncResult* r) {
	GError * _inner_error_ = NULL;
#line 471 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_if_fail (r != NULL);
#line 2949 "test-utils.c"
	{
		GAsyncResult* _tmp0_;
#line 475 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp0_ = r;
#line 475 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		folks_test_utils_aggregator_prepare_and_wait_for_individuals_finish (_tmp0_, &_inner_error_);
#line 475 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 2958 "test-utils.c"
			goto __catch5_g_error;
		}
	}
	goto __finally5;
	__catch5_g_error:
	{
		GError* e1 = NULL;
		const gchar* _tmp1_;
#line 473 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		e1 = _inner_error_;
#line 473 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_inner_error_ = NULL;
#line 479 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp1_ = e1->message;
#line 479 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_error ("test-utils.vala:479: Error preparing aggregator: %s", _tmp1_);
#line 473 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_g_error_free0 (e1);
#line 2977 "test-utils.c"
	}
	__finally5:
#line 473 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 473 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 473 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_clear_error (&_inner_error_);
#line 473 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return;
#line 2988 "test-utils.c"
	}
#line 482 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_main_loop_quit (_data6_->main_loop);
#line 2992 "test-utils.c"
}


static void ___lambda10__gasync_ready_callback (GObject* source_object, GAsyncResult* res, gpointer self) {
#line 470 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	__lambda10_ (self, source_object, res);
#line 470 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	block6_data_unref (self);
#line 3001 "test-utils.c"
}


void folks_test_utils_aggregator_prepare_and_wait_for_individuals_sync_with_timeout (FolksIndividualAggregator* aggregator, gchar** expected_persona_names, int expected_persona_names_length1, gint timeout) {
	Block6Data* _data6_;
	GMainLoop* _tmp0_;
	FolksIndividualAggregator* _tmp1_;
	gchar** _tmp2_;
	gint _tmp2__length1;
	gint _tmp3_;
#line 464 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_if_fail (aggregator != NULL);
#line 464 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data6_ = g_slice_new0 (Block6Data);
#line 464 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data6_->_ref_count_ = 1;
#line 468 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = g_main_loop_new (NULL, FALSE);
#line 468 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data6_->main_loop = _tmp0_;
#line 470 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp1_ = aggregator;
#line 470 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp2_ = expected_persona_names;
#line 470 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp2__length1 = expected_persona_names_length1;
#line 470 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	folks_test_utils_aggregator_prepare_and_wait_for_individuals (_tmp1_, _tmp2_, _tmp2__length1, ___lambda10__gasync_ready_callback, block6_data_ref (_data6_));
#line 485 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp3_ = timeout;
#line 485 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	folks_test_utils_loop_run_with_timeout (_data6_->main_loop, _tmp3_);
#line 464 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	block6_data_unref (_data6_);
#line 464 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_data6_ = NULL;
#line 3038 "test-utils.c"
}


/**
   * Get a named individual from an {@link IndividualAggregator}.
   *
   * This returns the {@link Individual} with {@link NameDetails.full_name}
   * equal to ``full_name`` from the given ``aggregator``.
   *
   * If multiple individuals exist with the given name, the first one found is
   * returned. It is expected that tests will be constructed so that full names
   * are unique, however.
   *
   * If no individual is found with the given name, an assertion fails and the
   * program aborts.
   *
   * @param aggregator aggregator to retrieve the value from
   * @param full_name name of the individual to retrieve
   * @return individual with the given name
   *
   * @since 0.9.7
   */
FolksIndividual* folks_test_utils_get_individual_by_name (FolksIndividualAggregator* aggregator, const gchar* full_name) {
	FolksIndividual* result = NULL;
#line 507 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_val_if_fail (aggregator != NULL, NULL);
#line 507 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_val_if_fail (full_name != NULL, NULL);
#line 3067 "test-utils.c"
	{
		GeeIterator* _v_it = NULL;
		FolksIndividualAggregator* _tmp0_;
		GeeMap* _tmp1_;
		GeeMap* _tmp2_;
		GeeCollection* _tmp3_;
		GeeCollection* _tmp4_;
		GeeCollection* _tmp5_;
		GeeIterator* _tmp6_;
		GeeIterator* _tmp7_;
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp0_ = aggregator;
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp1_ = folks_individual_aggregator_get_individuals (_tmp0_);
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp2_ = _tmp1_;
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp3_ = gee_map_get_values (_tmp2_);
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp4_ = _tmp3_;
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp5_ = _tmp4_;
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp6_ = gee_iterable_iterator ((GeeIterable*) _tmp5_);
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp7_ = _tmp6_;
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_g_object_unref0 (_tmp5_);
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_v_it = _tmp7_;
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		while (TRUE) {
#line 3100 "test-utils.c"
			GeeIterator* _tmp8_;
			gboolean _tmp9_;
			FolksIndividual* v = NULL;
			GeeIterator* _tmp10_;
			gpointer _tmp11_;
			FolksIndividual* _tmp12_;
			const gchar* _tmp13_;
			const gchar* _tmp14_;
			const gchar* _tmp15_;
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp8_ = _v_it;
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp9_ = gee_iterator_next (_tmp8_);
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			if (!_tmp9_) {
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				break;
#line 3118 "test-utils.c"
			}
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp10_ = _v_it;
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp11_ = gee_iterator_get (_tmp10_);
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			v = (FolksIndividual*) _tmp11_;
#line 512 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp12_ = v;
#line 512 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp13_ = folks_name_details_get_full_name ((FolksNameDetails*) _tmp12_);
#line 512 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp14_ = _tmp13_;
#line 512 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_tmp15_ = full_name;
#line 512 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			if (g_strcmp0 (_tmp14_, _tmp15_) == 0) {
#line 513 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				result = v;
#line 513 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				_g_object_unref0 (_v_it);
#line 513 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
				return result;
#line 3142 "test-utils.c"
			}
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			_g_object_unref0 (v);
#line 3146 "test-utils.c"
		}
#line 510 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_g_object_unref0 (_v_it);
#line 3150 "test-utils.c"
	}
#line 516 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_assert_not_reached ();
#line 3154 "test-utils.c"
}


/**
   * Run a helper executable.
   *
   * @param argv Arguments for the executable. The first is the path of
   *  the executable itself, relative to ${builddir}/tests.
   * @param capture_stdout If non-null, the executable's standard output is
   *  placed here. If null, the executable's standard output goes to the
   *  same place as the test's standard output.
   */
static gchar** _vala_array_dup1 (gchar** self, int length) {
	gchar** result;
	int i;
#line 542 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	result = g_new0 (gchar*, length + 1);
#line 542 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	for (i = 0; i < length; i++) {
#line 3174 "test-utils.c"
		gchar* _tmp0_;
#line 542 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp0_ = g_strdup (self[i]);
#line 542 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		result[i] = _tmp0_;
#line 3180 "test-utils.c"
	}
#line 542 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return result;
#line 3184 "test-utils.c"
}


void folks_test_utils_run_test_helper_sync (gchar** argv, int argv_length1, gchar* * capture_stdout, GError** error) {
	gchar* _vala_capture_stdout = NULL;
	gchar* execdir = NULL;
	const gchar* _tmp0_;
	gchar** argv_ = NULL;
	gchar** _tmp3_;
	gint _tmp3__length1;
	gchar** _tmp4_;
	gint _tmp4__length1;
	gchar** _tmp5_;
	gint _tmp5__length1;
	gint argv__length1;
	gint _argv__size_;
	gchar** _tmp6_;
	gint _tmp6__length1;
	const gchar* _tmp7_;
	gchar* _tmp8_;
	gchar* _tmp9_;
	gchar** _tmp10_;
	gint _tmp10__length1;
	const gchar* _tmp11_;
	gchar* _tmp12_;
	gchar* _tmp13_;
	gint exit_status = 0;
	gchar** _tmp14_;
	gint _tmp14__length1;
	gchar* _tmp15_ = NULL;
	gint _tmp16_ = 0;
	gint _tmp17_;
	GError * _inner_error_ = NULL;
#line 533 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = g_getenv ("FOLKS_TESTS_INSTALLED");
#line 533 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_tmp0_ != NULL) {
#line 3222 "test-utils.c"
		gchar* _tmp1_;
#line 535 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp1_ = g_strdup (INSTALLED_TESTS_DIR "/");
#line 535 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_g_free0 (execdir);
#line 535 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		execdir = _tmp1_;
#line 3230 "test-utils.c"
	} else {
		gchar* _tmp2_;
#line 539 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp2_ = g_strdup (ABS_TOP_BUILDDIR "/tests");
#line 539 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_g_free0 (execdir);
#line 539 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		execdir = _tmp2_;
#line 3239 "test-utils.c"
	}
#line 542 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp3_ = argv;
#line 542 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp3__length1 = argv_length1;
#line 542 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp4_ = argv;
#line 542 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp4__length1 = argv_length1;
#line 542 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp5_ = ((_tmp3_ + 0) != NULL) ? _vala_array_dup1 (_tmp3_ + 0, _tmp4__length1 - 0) : ((gpointer) (_tmp3_ + 0));
#line 542 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp5__length1 = _tmp4__length1 - 0;
#line 542 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	argv_ = _tmp5_;
#line 542 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	argv__length1 = _tmp5__length1;
#line 542 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_argv__size_ = argv__length1;
#line 543 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp6_ = argv_;
#line 543 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp6__length1 = argv__length1;
#line 543 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp7_ = execdir;
#line 543 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp8_ = g_strconcat (_tmp7_, "/", NULL);
#line 543 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp9_ = _tmp8_;
#line 543 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp10_ = argv_;
#line 543 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp10__length1 = argv__length1;
#line 543 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp11_ = _tmp10_[0];
#line 543 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp12_ = g_strconcat (_tmp9_, _tmp11_, NULL);
#line 543 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_free0 (_tmp6_[0]);
#line 543 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp6_[0] = _tmp12_;
#line 543 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp13_ = _tmp6_[0];
#line 543 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_free0 (_tmp9_);
#line 545 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	exit_status = -1;
#line 546 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp14_ = argv_;
#line 546 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp14__length1 = argv__length1;
#line 546 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_spawn_sync (NULL, _tmp14_, NULL, 0, NULL, NULL, &_tmp15_, NULL, &_tmp16_, &_inner_error_);
#line 546 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_free0 (_vala_capture_stdout);
#line 546 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_vala_capture_stdout = _tmp15_;
#line 546 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	exit_status = _tmp16_;
#line 546 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 546 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_propagate_error (error, _inner_error_);
#line 546 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		argv_ = (_vala_array_free (argv_, argv__length1, (GDestroyNotify) g_free), NULL);
#line 546 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_g_free0 (execdir);
#line 546 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return;
#line 3309 "test-utils.c"
	}
#line 555 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp17_ = exit_status;
#line 555 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_spawn_check_exit_status (_tmp17_, &_inner_error_);
#line 555 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 555 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_propagate_error (error, _inner_error_);
#line 555 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		argv_ = (_vala_array_free (argv_, argv__length1, (GDestroyNotify) g_free), NULL);
#line 555 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_g_free0 (execdir);
#line 555 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return;
#line 3325 "test-utils.c"
	}
#line 528 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	argv_ = (_vala_array_free (argv_, argv__length1, (GDestroyNotify) g_free), NULL);
#line 528 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_g_free0 (execdir);
#line 528 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (capture_stdout) {
#line 528 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		*capture_stdout = _vala_capture_stdout;
#line 3335 "test-utils.c"
	} else {
#line 528 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_g_free0 (_vala_capture_stdout);
#line 3339 "test-utils.c"
	}
}


/**
   * Return the path to a test file that is distributed in the source tarball
   * and, if installed, is installed into ${installed_tests_dir}.
   *
   * @param filename A filename relative to ${top_srcdir}/tests
   *  or ${installed_tests_dir}.
   */
gchar* folks_test_utils_get_source_test_data (const gchar* filename) {
	gchar* result = NULL;
	const gchar* _tmp0_;
#line 565 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_val_if_fail (filename != NULL, NULL);
#line 567 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = g_getenv ("FOLKS_TESTS_INSTALLED");
#line 567 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_tmp0_ != NULL) {
#line 3360 "test-utils.c"
		const gchar* _tmp1_;
		gchar* _tmp2_;
#line 569 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp1_ = filename;
#line 569 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp2_ = g_strconcat (INSTALLED_TESTS_DIR "/", _tmp1_, NULL);
#line 569 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		result = _tmp2_;
#line 569 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return result;
#line 3371 "test-utils.c"
	} else {
		const gchar* _tmp3_;
		gchar* _tmp4_;
#line 573 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp3_ = filename;
#line 573 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp4_ = g_strconcat (ABS_TOP_SRCDIR "/tests/", _tmp3_, NULL);
#line 573 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		result = _tmp4_;
#line 573 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return result;
#line 3383 "test-utils.c"
	}
}


/**
   * Return the path to a test file that is built by "make"
   * and, if installed, is installed into ${installed_tests_dir}.
   *
   * @param filename A filename relative to ${top_builddir}/tests
   *  or ${installed_tests_dir}.
   */
gchar* folks_test_utils_get_built_test_data (const gchar* filename) {
	gchar* result = NULL;
	const gchar* _tmp0_;
#line 584 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_val_if_fail (filename != NULL, NULL);
#line 586 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = g_getenv ("FOLKS_TESTS_INSTALLED");
#line 586 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_tmp0_ != NULL) {
#line 3404 "test-utils.c"
		const gchar* _tmp1_;
		gchar* _tmp2_;
#line 588 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp1_ = filename;
#line 588 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp2_ = g_strconcat (INSTALLED_TESTS_DIR "/", _tmp1_, NULL);
#line 588 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		result = _tmp2_;
#line 588 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return result;
#line 3415 "test-utils.c"
	} else {
		const gchar* _tmp3_;
		gchar* _tmp4_;
#line 592 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp3_ = filename;
#line 592 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp4_ = g_strconcat (ABS_TOP_BUILDDIR "/tests/", _tmp3_, NULL);
#line 592 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		result = _tmp4_;
#line 592 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return result;
#line 3427 "test-utils.c"
	}
}


/**
   * Check that there are no pending events on the given ``context``, and return
   * ``true`` if there are none.
   *
   * @param context A main context, or ``null`` to use the default main context.
   * @returns Whether there are no events pending on the context.
   * @since 0.9.7
   */
gboolean folks_test_utils_main_context_is_empty (GMainContext* context) {
	gboolean result = FALSE;
	GMainContext* _tmp0_;
	GMainContext* _tmp2_;
	gboolean _tmp3_;
#line 606 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp0_ = context;
#line 606 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (_tmp0_ == NULL) {
#line 3449 "test-utils.c"
		GMainContext* _tmp1_;
#line 607 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		_tmp1_ = g_main_context_default ();
#line 607 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		context = _tmp1_;
#line 3455 "test-utils.c"
	}
#line 609 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp2_ = context;
#line 609 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	_tmp3_ = g_main_context_pending (_tmp2_);
#line 609 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	result = !_tmp3_;
#line 609 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return result;
#line 3465 "test-utils.c"
}


FolksTestUtils* folks_test_utils_construct (GType object_type) {
	FolksTestUtils* self = NULL;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	self = (FolksTestUtils*) g_type_create_instance (object_type);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return self;
#line 3475 "test-utils.c"
}


FolksTestUtils* folks_test_utils_new (void) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return folks_test_utils_construct (FOLKS_TYPE_TEST_UTILS);
#line 3482 "test-utils.c"
}


static void folks_value_test_utils_init (GValue* value) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	value->data[0].v_pointer = NULL;
#line 3489 "test-utils.c"
}


static void folks_value_test_utils_free_value (GValue* value) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (value->data[0].v_pointer) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		folks_test_utils_unref (value->data[0].v_pointer);
#line 3498 "test-utils.c"
	}
}


static void folks_value_test_utils_copy_value (const GValue* src_value, GValue* dest_value) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (src_value->data[0].v_pointer) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		dest_value->data[0].v_pointer = folks_test_utils_ref (src_value->data[0].v_pointer);
#line 3508 "test-utils.c"
	} else {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		dest_value->data[0].v_pointer = NULL;
#line 3512 "test-utils.c"
	}
}


static gpointer folks_value_test_utils_peek_pointer (const GValue* value) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return value->data[0].v_pointer;
#line 3520 "test-utils.c"
}


static gchar* folks_value_test_utils_collect_value (GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (collect_values[0].v_pointer) {
#line 3527 "test-utils.c"
		FolksTestUtils * object;
		object = collect_values[0].v_pointer;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		if (object->parent_instance.g_class == NULL) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			return g_strconcat ("invalid unclassed object pointer for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 3534 "test-utils.c"
		} else if (!g_value_type_compatible (G_TYPE_FROM_INSTANCE (object), G_VALUE_TYPE (value))) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
			return g_strconcat ("invalid object type `", g_type_name (G_TYPE_FROM_INSTANCE (object)), "' for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 3538 "test-utils.c"
		}
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		value->data[0].v_pointer = folks_test_utils_ref (object);
#line 3542 "test-utils.c"
	} else {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		value->data[0].v_pointer = NULL;
#line 3546 "test-utils.c"
	}
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return NULL;
#line 3550 "test-utils.c"
}


static gchar* folks_value_test_utils_lcopy_value (const GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
	FolksTestUtils ** object_p;
	object_p = collect_values[0].v_pointer;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (!object_p) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		return g_strdup_printf ("value location for `%s' passed as NULL", G_VALUE_TYPE_NAME (value));
#line 3561 "test-utils.c"
	}
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (!value->data[0].v_pointer) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		*object_p = NULL;
#line 3567 "test-utils.c"
	} else if (collect_flags & G_VALUE_NOCOPY_CONTENTS) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		*object_p = value->data[0].v_pointer;
#line 3571 "test-utils.c"
	} else {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		*object_p = folks_test_utils_ref (value->data[0].v_pointer);
#line 3575 "test-utils.c"
	}
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return NULL;
#line 3579 "test-utils.c"
}


GParamSpec* folks_param_spec_test_utils (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags) {
	FolksParamSpecTestUtils* spec;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_val_if_fail (g_type_is_a (object_type, FOLKS_TYPE_TEST_UTILS), NULL);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	spec = g_param_spec_internal (G_TYPE_PARAM_OBJECT, name, nick, blurb, flags);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	G_PARAM_SPEC (spec)->value_type = object_type;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return G_PARAM_SPEC (spec);
#line 3593 "test-utils.c"
}


gpointer folks_value_get_test_utils (const GValue* value) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_val_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, FOLKS_TYPE_TEST_UTILS), NULL);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return value->data[0].v_pointer;
#line 3602 "test-utils.c"
}


void folks_value_set_test_utils (GValue* value, gpointer v_object) {
	FolksTestUtils * old;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, FOLKS_TYPE_TEST_UTILS));
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	old = value->data[0].v_pointer;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (v_object) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, FOLKS_TYPE_TEST_UTILS));
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		value->data[0].v_pointer = v_object;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		folks_test_utils_ref (value->data[0].v_pointer);
#line 3622 "test-utils.c"
	} else {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		value->data[0].v_pointer = NULL;
#line 3626 "test-utils.c"
	}
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (old) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		folks_test_utils_unref (old);
#line 3632 "test-utils.c"
	}
}


void folks_value_take_test_utils (GValue* value, gpointer v_object) {
	FolksTestUtils * old;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, FOLKS_TYPE_TEST_UTILS));
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	old = value->data[0].v_pointer;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (v_object) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, FOLKS_TYPE_TEST_UTILS));
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		value->data[0].v_pointer = v_object;
#line 3651 "test-utils.c"
	} else {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		value->data[0].v_pointer = NULL;
#line 3655 "test-utils.c"
	}
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (old) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		folks_test_utils_unref (old);
#line 3661 "test-utils.c"
	}
}


static void folks_test_utils_class_init (FolksTestUtilsClass * klass) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	folks_test_utils_parent_class = g_type_class_peek_parent (klass);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	((FolksTestUtilsClass *) klass)->finalize = folks_test_utils_finalize;
#line 3671 "test-utils.c"
}


static void folks_test_utils_instance_init (FolksTestUtils * self) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	self->ref_count = 1;
#line 3678 "test-utils.c"
}


static void folks_test_utils_finalize (FolksTestUtils * obj) {
	FolksTestUtils * self;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, FOLKS_TYPE_TEST_UTILS, FolksTestUtils);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_signal_handlers_destroy (self);
#line 3688 "test-utils.c"
}


GType folks_test_utils_get_type (void) {
	static volatile gsize folks_test_utils_type_id__volatile = 0;
	if (g_once_init_enter (&folks_test_utils_type_id__volatile)) {
		static const GTypeValueTable g_define_type_value_table = { folks_value_test_utils_init, folks_value_test_utils_free_value, folks_value_test_utils_copy_value, folks_value_test_utils_peek_pointer, "p", folks_value_test_utils_collect_value, "p", folks_value_test_utils_lcopy_value };
		static const GTypeInfo g_define_type_info = { sizeof (FolksTestUtilsClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) folks_test_utils_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (FolksTestUtils), 0, (GInstanceInitFunc) folks_test_utils_instance_init, &g_define_type_value_table };
		static const GTypeFundamentalInfo g_define_type_fundamental_info = { (G_TYPE_FLAG_CLASSED | G_TYPE_FLAG_INSTANTIATABLE | G_TYPE_FLAG_DERIVABLE | G_TYPE_FLAG_DEEP_DERIVABLE) };
		GType folks_test_utils_type_id;
		folks_test_utils_type_id = g_type_register_fundamental (g_type_fundamental_next (), "FolksTestUtils", &g_define_type_info, &g_define_type_fundamental_info, 0);
		g_once_init_leave (&folks_test_utils_type_id__volatile, folks_test_utils_type_id);
	}
	return folks_test_utils_type_id__volatile;
}


gpointer folks_test_utils_ref (gpointer instance) {
	FolksTestUtils * self;
	self = instance;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	g_atomic_int_inc (&self->ref_count);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	return instance;
#line 3713 "test-utils.c"
}


void folks_test_utils_unref (gpointer instance) {
	FolksTestUtils * self;
	self = instance;
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
	if (g_atomic_int_dec_and_test (&self->ref_count)) {
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		FOLKS_TEST_UTILS_GET_CLASS (self)->finalize (self);
#line 27 "/opt/gnome/source/folks/tests/lib/test-utils.vala"
		g_type_free_instance ((GTypeInstance *) self);
#line 3726 "test-utils.c"
	}
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}



